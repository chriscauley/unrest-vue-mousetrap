(function(e){function t(t){for(var r,s,a=t[0],c=t[1],u=t[2],h=0,d=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/unrest-vue-mousetrap/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"317d":function(e,t,n){},"3a62":function(e,t,n){},"3b37":function(e,t,n){},4945:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i=n("29ec"),o=n.n(i),s=(n("737e"),n("4945"),{class:"app-root"}),a={class:"navbar"},c=Object(r["createVNode"])("div",{class:"navbar-brand"},"@unrest/vue-mousetrap",-1),u={class:"navbar-section flex items-center"},l=Object(r["createVNode"])("a",{href:"http://github.com/chriscauley/unrest-vue-mousetrap",class:"btn -light"},[Object(r["createVNode"])("i",{class:"fa fa-github fa-2x"})],-1),h={class:"app-view"},d=Object(r["createVNode"])("div",{class:"text-center mb-16"},[Object(r["createTextVNode"])(" For more information, checkout the "),Object(r["createVNode"])("a",{class:"link",href:"http://github.com/chriscauley/unrest-vue-mousetrap"},"README"),Object(r["createTextVNode"])(" on github. ")],-1);function f(e,t,n,i,o,f){var p=Object(r["resolveComponent"])("router-link"),g=Object(r["resolveComponent"])("router-view");return Object(r["openBlock"])(),Object(r["createBlock"])("div",s,[Object(r["createVNode"])("header",a,[c,Object(r["createVNode"])("div",u,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(o.tabs,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:f.css.tab(e),key:e[0]},[Object(r["createVNode"])(p,{to:e[0]},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e[1]),1)]})),_:2},1032,["to"])],2)})),128)),l])]),Object(r["createVNode"])("div",h,[Object(r["createVNode"])(g)]),d])}var p=n("3835"),g=[["/","Mixin"],["/composition-api","Composition"],["/mousetrap","Mousetrap"],["/custom","Custom"]],m={data:function(){return{tabs:g}},computed:{css:function(){var e=this;return{tab:function(t){var n=Object(p["a"])(t,1),r=n[0];return["btn",r===e.$route.path?"-primary":"-light"]}}}}};n("d4aa");m.render=f;var b=m,y=(n("ac1f"),n("1276"),{class:"code-wrapper"}),v={class:"lines"};function w(e,t,n,i,o,s){var a=Object(r["resolveComponent"])("ssh-pre");return Object(r["openBlock"])(),Object(r["createBlock"])("div",y,[Object(r["createVNode"])(a,{language:"js",label:n.label},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(n.code),1)]})),_:1},8,["label"]),Object(r["createVNode"])("div",v,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(n.code.split("\n"),(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:t,class:s.css(t)},Object(r["toDisplayString"])(o.counts[t]),3)})),128))])])}n("4160"),n("caad"),n("d81d"),n("2532"),n("159b");var _={props:{code:String,lines:Array,label:String},data:function(){return{counts:{},fade:!1,lines0:[]}},watch:{lines:function(){var e=this;this.lines0=this.lines.map((function(e){return e-1})),this.fade=!1,this.lines0.forEach((function(t){return e.counts[t]=(e.counts[t]||0)+1})),setTimeout((function(){return e.fade=!0}),0)}},methods:{css:function(e){return["line",{"bg-blue-300":!this.fade&&this.lines0.includes(e)},{"bg-gray-200":this.fade&&this.lines0.includes(e)}]}}};n("81c1");_.render=w;var x=_,k=n("6c02"),j=Object(r["createVNode"])("p",{class:"text-xl text-center"},[Object(r["createTextVNode"])("Press "),Object(r["createVNode"])("code",null,"enter"),Object(r["createTextVNode"])(" to get started.")],-1),O={key:0,class:"modal"},E=Object(r["createVNode"])("div",{class:"modal-mask"},null,-1),B=Object(r["createVNode"])("div",{class:"modal-content",style:{width:"350px"}},[Object(r["createVNode"])("h2",null,"Welcome!"),Object(r["createVNode"])("p",null," When you press a hotkey, the lines in the source code are highlighted. The left column tells how many times that line has been triggered. "),Object(r["createVNode"])("p",null,[Object(r["createTextVNode"])(" While this welcome message is open, all hotkeys other than "),Object(r["createVNode"])("code",null,"enter"),Object(r["createTextVNode"])(" are disabled. ")]),Object(r["createVNode"])("p",null,[Object(r["createTextVNode"])("Press "),Object(r["createVNode"])("code",null,"enter"),Object(r["createTextVNode"])(" again and then scroll down to see more hotkey examples.")])],-1);function A(e,t,n,i,o,s){var a=Object(r["resolveComponent"])("highlighter");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[j,o.show_welcome?(Object(r["openBlock"])(),Object(r["createBlock"])("div",O,[E,B])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(a,{lines:o.highlighted,code:o.code,label:"Basics.vue"},null,8,["lines","code"])],64)}var I=n("ade3"),N=(n("4fad"),n("d3b7"),n("38cf"),n("498a"),n("ddb0"),n("8a60")),S=n.n(N),M=(n("b0c0"),n("5319"),{}),C={},L=function(e){return e.replace(/[A-Z]/g,(function(e){return" ".concat(e.toLowerCase())})).replace(/-_/g," ").replace(/^./,(function(e){return e.toUpperCase()}))},T=function(){var e=/Mac|iPod|iPhone|iPad/;return"undefined"!=typeof window&&e.test(window.navigator.platform)},V=function(e){return e=e.split(",")[0],e=e.replace("mod",T()?"cmd":"ctrl"),e},U=function(e){return e.replace(/shift ?\+ ?/gi,"⇧").replace(/meta ?\+ ?/gi,"⌘").replace(/control ?\+ ?/gi,"^")},P=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(1!==n.length){var i=n[0],o=n[1];C[i]||(C[i]={slug:i,name:L(i),actions:[]});var s=C[i];Object.entries(o).forEach((function(e){var t=Object(p["a"])(e,2),n=t[0],r=t[1];"string"===typeof r&&(r={keys:r}),r.name=r.name||L(n),r.display=r.display||V(r.keys),r.short_display=r.short_display||U(r.display),M[n]=r,s.actions.push(r)}))}else e("",n[0])};Object.assign(P,{actionBySlug:M,groupBySlug:C});var W=P;(function(e){if(e){var t={},n=e.prototype.stopCallback;e.prototype.stopCallback=function(e,r,i,o){var s=this;return!!s.paused||!t[i]&&!t[o]&&n.call(s,e,r,i)},e.prototype.bindGlobal=function(e,n,r){var i=this;if(i.bind(e,n,r),e instanceof Array)for(var o=0;o<e.length;o++)t[e[o]]=!0;else t[e]=!0},e.init()}})("undefined"!==typeof S.a?S.a:void 0);var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.element,r=t.delimiter,i=void 0===r?",":r,o=new S.a(n);return Object.entries(e).forEach((function(e){var t=Object(p["a"])(e,2),n=t[0],r=t[1];W.actionBySlug[n]&&(n=W.actionBySlug[n].keys),n.includes(i)&&(n=n.split(i).map((function(e){return e.trim()}))),"function"===typeof r&&(r={keydown:r}),r.repeat&&!r.keydown&&(r.keydown=r.repeat);var s=r,a=s.repeat,c=s.keydown,u=s.keyup,l=s.keypress,h=s.global,d=function(){return h?o.bindGlobal.apply(o,arguments):o.bind.apply(o,arguments)};a?d(n,(function(e){return e.repeat?a(e):c(e)})):c&&d(n,(function(e){return!e.repeat&&c(e)})),u&&d(n,u,"keyup"),l&&d(n,l,"keypress")})),o},H=function(e){var t=e.namespace,n=void 0===t?"mousetrap":t,r=e.delimiter,i=void 0===r?",":r,o=e.local;return{watch:Object(I["a"])({},n,"_sync"+n),mounted:function(){this["_sync"+n]()},beforeUnmount:function(){this["__".concat(n)].reset()},methods:Object(I["a"])({},"_sync"+n,(function(){var e;null===(e=this["__".concat(n)])||void 0===e||e.reset();var t=o?this.$el:document.body;this["__".concat(n)]=F(this[n],{element:t,delimiter:i})}))}},D=H({});D.config=H;var q=D,R=(n("a4d3"),n("e01a"),{class:"modal"}),Y={class:"modal-content"},G=Object(r["createVNode"])("h3",null,"Keyboard Shortcuts",-1),$={key:0},z={class:"table"};function K(e,t,n,i,o,s){return Object(r["openBlock"])(),Object(r["createBlock"])("div",R,[Object(r["createVNode"])("div",{class:"modal-mask",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})}),Object(r["createVNode"])("div",Y,[G,Object(r["renderSlot"])(e.$slots,"default"),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(s.groups,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:e.slug},[e.name?(Object(r["openBlock"])(),Object(r["createBlock"])("h4",$,Object(r["toDisplayString"])(e.name),1)):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("table",z,[Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.actions,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:e.slug},[Object(r["createVNode"])("td",null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name)+" ",1),e.description?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:0,title:e.description}," ❓ ",8,["title"])):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.display),1)])})),128))])])])})),128))])])}n("b64b");var J={mixins:[q],props:{group_slugs:Array},emits:["close"],computed:{groups:function(){var e=this.group_slugs,t=void 0===e?Object.keys(W.groupBySlug):e;return t.map((function(e){return W.groupBySlug[e]}))},mousetrap:function(){var e=this;return{"esc,?":function(){return e.$emit("close")}}}}};J.render=K;var X=J,Q=function(e,t){var n;if("function"===typeof e){var i=Object(r["computed"])(e);Object(r["watch"])(i,(function(e){n.reset(),n=F(e,t)})),e=i.value}Object(r["onMounted"])((function(){n=F(e,t)})),Object(r["onUnmounted"])((function(){n.reset()}))},Z={Mixin:q,Modal:X,register:W,use:Q},ee='<script>\nimport Mousetrap from \'@unrest/vue-mousetrap\'\nimport code from \'raw-loader!./raw/Basics.txt\'\n\nexport default {\n  mixins: [Mousetrap.Mixin],\n  data() {\n    return { code, highlighted: [], show_welcome: false }\n  },\n  computed: {\n    mousetrap() {\n      if (this.show_welcome) {\n        // if this.mousetrap is computed, it will be reactive\n        return {\n          enter: () => {\n            this.show_welcome = false\n            this.highlighted = [15, 16, 17, 18]\n          },\n        }\n      }\n      return {\n        enter: () => {\n          this.show_welcome = true\n          this.highlighted = [22, 23, 24, 25]\n        },\n\n        // multiple keys can be specified with commas\n        \'a,b\': () => (this.highlighted = [28]),\n\n        // behavior can be customized with an object\n        \'?,/\': {\n          keydown: () => (this.highlighted = [32]),\n          keyup: () => (this.highlighted = [33]),\n        },\n\n        // repeat keys fire when held down\n        q: {\n          repeat: () => (this.highlighted = [38]),\n        },\n\n        // global hotkeys will work even on input fields\n        \'ctrl+b,command+b\': {\n          global: true,\n          keydown: () => (this.highlighted = [44]),\n        },\n      }\n    },\n  },\n}\n<\/script>\n\n<template>\n  <p class="text-xl text-center">Press <code>enter</code> to get started.</p>\n  <div v-if="show_welcome" class="modal">\n    <div class="modal-mask" />\n    <div class="modal-content" style="width: 350px">\n      <h2>Welcome!</h2>\n      <p>\n        When you press a hotkey, the lines in the source code are highlighted. The left column tells\n        how many times that line has been triggered.\n      </p>\n      <p>\n        While this welcome message is open, all hotkeys other than <code>enter</code> are disabled.\n      </p>\n      <p>Press <code>enter</code> again and then scroll down to see more hotkey examples.</p>\n    </div>\n  </div>\n  <highlighter :lines="highlighted" :code="code" label="Basics.vue" />\n</template>\n',te={mixins:[Z.Mixin],data:function(){return{code:ee,highlighted:[],show_welcome:!1}},computed:{mousetrap:function(){var e=this;return this.show_welcome?{enter:function(){e.show_welcome=!1,e.highlighted=[15,16,17,18]}}:{enter:function(){e.show_welcome=!0,e.highlighted=[22,23,24,25]},"a,b":function(){return e.highlighted=[28]},"?,/":{keydown:function(){return e.highlighted=[32]},keyup:function(){return e.highlighted=[33]}},q:{repeat:function(){return e.highlighted=[38]}},"ctrl+b,command+b":{global:!0,keydown:function(){return e.highlighted=[44]}}}}}};te.render=A;var ne=te,re=Object(r["createVNode"])("p",null,[Object(r["createTextVNode"])(" Below is the examples used in the "),Object(r["createVNode"])("a",{href:"https://craig.is/killing/mice"},"Mousetrap documentation"),Object(r["createTextVNode"])(". Since this package is just a wrapper around mousetrap, please refer to the mousetrap docs for more information on how to construct key codes. ")],-1);function ie(e,t,n,i,o,s){var a=Object(r["resolveComponent"])("highlighter");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[re,Object(r["createVNode"])(a,{lines:o.highlighted,code:o.code,label:"Mousetrap.vue"},null,8,["lines","code"])],64)}var oe="<script>\nimport Mousetrap from '@unrest/vue-mousetrap'\nimport code from 'raw-loader!./raw/Mousetrap.txt'\n\nexport default {\n  mixins: [Mousetrap.Mixin],\n  data() {\n    return { code, highlighted: [], paused: false }\n  },\n  computed: {\n    mousetrap() {\n      return {\n        // single keys\n        4: () => (this.highlighted = [14]),\n        x: {\n          // key up only\n          keyup: () => (this.highlighted = [17]),\n        },\n\n        // combinations (mod = ctrl or command)\n        'mod+shift+k': () => {\n          this.highlighted = [21, 22, 23, 24]\n          return false\n        },\n\n        'command+k,ctrl+k': () => {\n          this.highlighted = [26, 27, 28, 29]\n          return false\n        },\n\n        // gmail style sequences\n        'g i': () => (this.highlighted = [32]),\n        '* a': () => (this.highlighted = [33]),\n\n        // konami code!\n        'up up down down left right left right b a enter': () => {\n          this.highlighted = [36, 37, 38]\n        },\n      }\n    },\n  },\n}\n<\/script>\n\n<template>\n  <p>\n    Below is the examples used in the\n    <a href=\"https://craig.is/killing/mice\">Mousetrap documentation</a>. Since this package is just\n    a wrapper around mousetrap, please refer to the mousetrap docs for more information on how to\n    construct key codes.\n  </p>\n  <highlighter :lines=\"highlighted\" :code=\"code\" label=\"Mousetrap.vue\" />\n</template>\n",se={mixins:[Z.Mixin],data:function(){return{code:oe,highlighted:[],paused:!1}},computed:{mousetrap:function(){var e=this;return{4:function(){return e.highlighted=[14]},x:{keyup:function(){return e.highlighted=[17]}},"mod+shift+k":function(){return e.highlighted=[21,22,23,24],!1},"command+k,ctrl+k":function(){return e.highlighted=[26,27,28,29],!1},"g i":function(){return e.highlighted=[32]},"* a":function(){return e.highlighted=[33]},"up up down down left right left right b a enter":function(){e.highlighted=[36,37,38]}}}}};se.render=ie;var ae=se,ce=Object(r["createVNode"])("p",{class:"text-xl text-center"},[Object(r["createTextVNode"])("Press "),Object(r["createVNode"])("code",null,"enter"),Object(r["createTextVNode"])(" to get started.")],-1),ue={key:0,class:"modal"},le=Object(r["createStaticVNode"])('<div class="modal-mask"></div><div class="modal-content" style="width:450px;"><h2>Welcome!</h2><p> When you press a hotkey, the lines in the source code are highlighted. The left column tells how many times that line has been triggered. </p><p> While this welcome message is open, all hotkeys other than <code>enter</code> are disabled. </p><p> Note: In this example the first argument of <code>Mousetrap.use(ACTIONS)</code> is a function. This means the hotkeys are rebound any time <code>data.show_welcome</code> changes (since it is a reactive property accesed during the function call). </p><p>Press <code>enter</code> again and then scroll down to see more hotkey examples.</p></div>',2);function he(e,t,n,i,o,s){var a=Object(r["resolveComponent"])("highlighter");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[ce,e.show_welcome?(Object(r["openBlock"])(),Object(r["createBlock"])("div",ue,[le])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(a,{lines:e.highlighted,code:e.code,label:"Basics.vue"},null,8,["lines","code"])],64)}var de='<script>\nimport { reactive } from \'vue\'\nimport Mousetrap from \'@unrest/vue-mousetrap\'\nimport code from \'raw-loader!./raw/CompositionApi.txt\'\n\nexport default {\n  setup() {\n    const data = reactive({\n      show_welcome: false,\n      highlighted: [],\n      code,\n    })\n    Mousetrap.use(() => {\n      if (data.show_welcome) {\n        return {\n          enter: () => {\n            data.show_welcome = false\n            data.highlighted = [16, 17, 18, 19]\n          },\n        }\n      }\n      return {\n        enter: () => {\n          data.show_welcome = true\n          data.highlighted = [23, 24, 25, 26]\n        },\n\n        // multiple keys can be specified with commas\n        \'a,b\': () => (data.highlighted = [29]),\n\n        // behavior can be customized with an object\n        \'?,/\': {\n          keydown: () => (data.highlighted = [33]),\n          keyup: () => (data.highlighted = [34]),\n        },\n\n        // repeat keys fire when held down\n        q: {\n          repeat: () => (data.highlighted = [39]),\n        },\n\n        // global hotkeys will work even on input fields\n        \'ctrl+b,command+b\': {\n          global: true,\n          keydown: () => (data.highlighted = [43, 44, 45, 46]),\n        },\n      }\n    })\n    return data\n  },\n}\n<\/script>\n\n<template>\n  <p class="text-xl text-center">Press <code>enter</code> to get started.</p>\n  <div v-if="show_welcome" class="modal">\n    <div class="modal-mask" />\n    <div class="modal-content" style="width: 450px">\n      <h2>Welcome!</h2>\n      <p>\n        When you press a hotkey, the lines in the source code are highlighted. The left column tells\n        how many times that line has been triggered.\n      </p>\n      <p>\n        While this welcome message is open, all hotkeys other than <code>enter</code> are disabled.\n      </p>\n      <p>\n        Note: In this example the first argument of <code>Mousetrap.use(ACTIONS)</code> is a\n        function. This means the hotkeys are rebound any time <code>data.show_welcome</code>\n        changes (since it is a reactive property accesed during the function call).\n      </p>\n      <p>Press <code>enter</code> again and then scroll down to see more hotkey examples.</p>\n    </div>\n  </div>\n  <highlighter :lines="highlighted" :code="code" label="Basics.vue" />\n</template>\n',fe={setup:function(){var e=Object(r["reactive"])({show_welcome:!1,highlighted:[],code:de});return Z.use((function(){return e.show_welcome?{enter:function(){e.show_welcome=!1,e.highlighted=[16,17,18,19]}}:{enter:function(){e.show_welcome=!0,e.highlighted=[23,24,25,26]},"a,b":function(){return e.highlighted=[29]},"?,/":{keydown:function(){return e.highlighted=[33]},keyup:function(){return e.highlighted=[34]}},q:{repeat:function(){return e.highlighted=[39]}},"ctrl+b,command+b":{global:!0,keydown:function(){return e.highlighted=[43,44,45,46]}}}})),e}};fe.render=he;var pe=fe,ge=Object(r["createVNode"])("p",{class:"text-xl text-center"},' Press "?" to see help menu. ',-1),me=Object(r["createVNode"])("div",{style:{"max-width":"300px"}},[Object(r["createVNode"])("p",null,[Object(r["createVNode"])("code",null,"Mousetrap.register"),Object(r["createTextVNode"])(" is useful for generating programatic documentation for hotkeys. It's also used to create aliases and group hotkeys. ")]),Object(r["createVNode"])("p",null,[Object(r["createVNode"])("code",null,"Mousetrap.Modal"),Object(r["createTextVNode"])(" (this component) is included as a quick way to display all registered hotkeys to users. ")])],-1);function be(e,t,n,i,o,s){var a=Object(r["resolveComponent"])("mousetrap-modal"),c=Object(r["resolveComponent"])("highlighter");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[ge,o.show_help?(Object(r["openBlock"])(),Object(r["createBlock"])(a,{key:0,onClose:t[1]||(t[1]=function(e){return o.show_help=null})},{default:Object(r["withCtx"])((function(){return[me]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(c,{lines:o.highlighted,code:o.code,label:e.HelpModal.vue},null,8,["lines","code","label"])],64)}var ye="<script>\nimport Mousetrap from '@unrest/vue-mousetrap'\nimport code from 'raw-loader!./raw/HelpModal.txt'\n\nMousetrap.register({\n  open: 'mod+o', // string yields no overrides\n  showHelp: '?,/', // will only show first key in help menu\n  save: {\n    name: 'Save File', // override name\n    keys: 'mod+s',\n  },\n  move: {\n    name: 'Move player',\n    keys: 'up,down,left,right,w,a,s,d',\n    display: 'Arrows/wasd',\n    description: 'Actions can also have descriptions!',\n  },\n  cheat: {\n    name: 'Infinite Lives',\n    keys: 'up up down down left right left right b a enter',\n    display: \"I'm not telling!\",\n    short_display: '???',\n  },\n  preserveAspectRatio: {\n    // this shortcut only exists as documentation (no keys)\n    display: 'Shift+click',\n    description: 'Non-keyboard shortcuts can also be added.',\n  },\n})\n\nexport default {\n  components: { MousetrapModal: Mousetrap.Modal },\n  mixins: [Mousetrap.Mixin],\n  data() {\n    return { code, highlighted: [], show_help: false }\n  },\n  computed: {\n    mousetrap() {\n      return {\n        open: () => (this.highlighted = [32]),\n        save: {\n          keydown: (e) => {\n            this.highlighted = [42, 43, 44, 45]\n            e.preventDefault() // override browser's ctrl+s/cmd+s\n          },\n          global: true, // works in input, textarea, etc\n        },\n        move: () => (this.highlighted = [48]),\n        cheat: () => (this.highlighted = [49]),\n        showHelp: () => {\n          this.show_help = !this.show_help\n          this.highlighted = [50, 51, 52, 53]\n        },\n        p: () => (this.highlighted = [54]), // not in global registry\n      }\n    },\n  },\n}\n<\/script>\n\n<template>\n  <p class=\"text-xl text-center\">\n    Press \"?\" to see help menu.\n  </p>\n  <mousetrap-modal v-if=\"show_help\" @close=\"show_help = null\">\n    <div style=\"max-width: 300px\">\n      <p>\n        <code>Mousetrap.register</code> is useful for generating programatic documentation for\n        hotkeys. It's also used to create aliases and group hotkeys.\n      </p>\n      <p>\n        <code>Mousetrap.Modal</code> (this component) is included as a quick way to display all\n        registered hotkeys to users.\n      </p>\n    </div>\n  </mousetrap-modal>\n  <highlighter :lines=\"highlighted\" :code=\"code\" :label=\"HelpModal.vue\" />\n</template>\n";Z.register({open:"mod+o",showHelp:"?,/",save:{name:"Save File",keys:"mod+s"},move:{name:"Move player",keys:"up,down,left,right,w,a,s,d",display:"Arrows/wasd",description:"Actions can also have descriptions!"},cheat:{name:"Infinite Lives",keys:"up up down down left right left right b a enter",display:"I'm not telling!",short_display:"???"},preserveAspectRatio:{display:"Shift+click",description:"Non-keyboard shortcuts can also be added."}});var ve={components:{MousetrapModal:Z.Modal},mixins:[Z.Mixin],data:function(){return{code:ye,highlighted:[],show_help:!1}},computed:{mousetrap:function(){var e=this;return{open:function(){return e.highlighted=[32]},save:{keydown:function(t){e.highlighted=[42,43,44,45],t.preventDefault()},global:!0},move:function(){return e.highlighted=[48]},cheat:function(){return e.highlighted=[49]},showHelp:function(){e.show_help=!e.show_help,e.highlighted=[50,51,52,53]},p:function(){return e.highlighted=[54]}}}}};ve.render=be;var we=ve,_e=Object(r["createVNode"])("div",null,[Object(r["createVNode"])("p",{class:"text-xl text-center"}," This example shows how to allow users to remap hotkeys. ")],-1),xe={class:"view-form"},ke={class:"right"},je=Object(r["createVNode"])("h3",null,"Customize Keys",-1),Oe=Object(r["createVNode"])("h3",null,"Presets",-1),Ee={class:"presets"};function Be(e,t,n,i,o,s){var a=Object(r["resolveComponent"])("highlighter");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[_e,Object(r["createVNode"])("div",xe,[Object(r["createVNode"])("pre",null,Object(r["toDisplayString"])(o.rows),1),Object(r["createVNode"])("div",ke,[Object(r["createVNode"])("form",null,[je,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(o.keys,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"form-row",key:t},[Object(r["createVNode"])("label",null,Object(r["toDisplayString"])(t),1),Object(r["withDirectives"])(Object(r["createVNode"])("input",{"onUpdate:modelValue":function(e){return o.keys[t]=e}},null,8,["onUpdate:modelValue"]),[[r["vModelText"],o.keys[t]]])])})),128)),Oe,Object(r["createVNode"])("div",Ee,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(s.presets,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:e.name},[Object(r["createVNode"])("button",{class:e.class,onClick:function(t){return s.setPreset(e)}},Object(r["toDisplayString"])(e.name),11,["onClick"])])})),128))])])])]),Object(r["createVNode"])(a,{lines:o.highlighted,code:o.code,label:"Basics.vue"},null,8,["lines","code"])],64)}n("a15b");var Ae=n("5530"),Ie=n("2ef0"),Ne="<script>\nimport { isEqual } from 'lodash'\nimport Mousetrap from '@unrest/vue-mousetrap'\nimport code from 'raw-loader!./raw/Custom.txt'\nimport { Game } from '@unrest/tetris'\n\nconst DEFAULT_KEYS = {\n  rotate: 'up',\n  down: 'down',\n  left: 'left',\n  right: 'right',\n  drop: 'space',\n  swap: 'swap',\n}\n\nexport default {\n  mixins: [Mousetrap.Mixin],\n  data() {\n    const keys = { ...DEFAULT_KEYS }\n    return { code, highlighted: [], show_welcome: false, keys, rows: '' }\n  },\n  computed: {\n    mousetrap() {\n      const { rotate, down, left, right, drop, swap } = this.keys\n      return {\n        [rotate]: () => this.press('rotate'),\n        [down]: () => this.press('down'),\n        [left]: () => this.press('left'),\n        [right]: () => this.press('right'),\n        [drop]: {\n          keydown: () => this.press('drop'),\n          keyup: () => this.press('lock'),\n        },\n        [swap]: () => this.press('swap'),\n      }\n    },\n    presets() {\n      const presets = [\n        ['arrows', DEFAULT_KEYS],\n        ['wasd', { rotate: 'w', left: 'a', down: 's', right: 'd', swap: 'q', drop: 'space' }],\n        ['wars', { rotate: 'w', left: 'a', down: 'r', right: 's', swap: 'q', drop: 'space' }],\n        [',aoe', { rotate: ',', left: 'a', down: 'o', right: 'e', swap: \"'\", drop: 'space' }],\n      ]\n      const _class = (keys) => ['btn', isEqual(keys, this.keys) ? '-primary' : '-secondary']\n      return presets.map(([name, keys]) => ({ name, keys, class: _class(keys) }))\n    },\n  },\n  mounted() {\n    this.reset()\n  },\n  methods: {\n    press(action) {\n      this.game.input(action), this.render()\n      return false // prevents default scrolling for arrow keys\n    },\n    reset() {\n      this.game = new Game({ W: 10, H: 20 })\n      this.game.on('gameover', this.reset)\n      this.render()\n    },\n    render() {\n      const { board } = this.game\n      const rows = []\n      board.geo.indexes.forEach((index) => {\n        const [x, y] = board.geo.index2xy(index)\n        rows[y] = rows[y] || []\n        rows[y][x] = board.entities[board.indexes[index]]?.shape || ' '\n      })\n      this.rows = rows.map((r) => r.join(' ')).join('\\n')\n    },\n    setPreset({ keys }) {\n      Object.assign(this.keys, keys)\n    },\n  },\n}\n<\/script>\n\n<template>\n  <div>\n    <p class=\"text-xl text-center\">\n      This example shows how to allow users to remap hotkeys.\n    </p>\n  </div>\n  <div class=\"view-form\">\n    <pre>{{ rows }}</pre>\n    <div class=\"right\">\n      <form>\n        <h3>Customize Keys</h3>\n        <div class=\"form-row\" v-for=\"(value, name) in keys\" :key=\"name\">\n          <label>{{ name }}</label>\n          <input v-model=\"keys[name]\" />\n        </div>\n        <h3>Presets</h3>\n        <div class=\"presets\">\n          <div v-for=\"preset in presets\" :key=\"preset.name\">\n            <button :class=\"preset.class\" @click=\"setPreset(preset)\">{{ preset.name }}</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n  <highlighter :lines=\"highlighted\" :code=\"code\" label=\"Basics.vue\" />\n</template>\n",Se=n("c9ce"),Me={rotate:"up",down:"down",left:"left",right:"right",drop:"space",swap:"swap"},Ce={mixins:[Z.Mixin],data:function(){var e=Object(Ae["a"])({},Me);return{code:Ne,highlighted:[],show_welcome:!1,keys:e,rows:""}},computed:{mousetrap:function(){var e,t=this,n=this.keys,r=n.rotate,i=n.down,o=n.left,s=n.right,a=n.drop,c=n.swap;return e={},Object(I["a"])(e,r,(function(){return t.press("rotate")})),Object(I["a"])(e,i,(function(){return t.press("down")})),Object(I["a"])(e,o,(function(){return t.press("left")})),Object(I["a"])(e,s,(function(){return t.press("right")})),Object(I["a"])(e,a,{keydown:function(){return t.press("drop")},keyup:function(){return t.press("lock")}}),Object(I["a"])(e,c,(function(){return t.press("swap")})),e},presets:function(){var e=this,t=[["arrows",Me],["wasd",{rotate:"w",left:"a",down:"s",right:"d",swap:"q",drop:"space"}],["wars",{rotate:"w",left:"a",down:"r",right:"s",swap:"q",drop:"space"}],[",aoe",{rotate:",",left:"a",down:"o",right:"e",swap:"'",drop:"space"}]],n=function(t){return["btn",Object(Ie["isEqual"])(t,e.keys)?"-primary":"-secondary"]};return t.map((function(e){var t=Object(p["a"])(e,2),r=t[0],i=t[1];return{name:r,keys:i,class:n(i)}}))}},mounted:function(){this.reset()},methods:{press:function(e){return this.game.input(e),this.render(),!1},reset:function(){this.game=new Se["a"]({W:10,H:20}),this.game.on("gameover",this.reset),this.render()},render:function(){var e=this.game.board,t=[];e.geo.indexes.forEach((function(n){var r,i=e.geo.index2xy(n),o=Object(p["a"])(i,2),s=o[0],a=o[1];t[a]=t[a]||[],t[a][s]=(null===(r=e.entities[e.indexes[n]])||void 0===r?void 0:r.shape)||" "})),this.rows=t.map((function(e){return e.join(" ")})).join("\n")},setPreset:function(e){var t=e.keys;Object.assign(this.keys,t)}}};Ce.render=Be;var Le=Ce,Te=Object(k["b"])(),Ve=[{path:"/",component:ne},{path:"/composition-api",component:pe},{path:"/mousetrap",component:ae},{path:"/help-modal",component:we},{path:"/custom",component:Le}],Ue=Object(k["a"])({history:Te,routes:Ve}),Pe=(n("3a62"),Object(r["createApp"])(b));Pe.component("SshPre",o.a),Pe.component("Highlighter",x),Pe.use(Ue),Pe.mount("#app")},"81c1":function(e,t,n){"use strict";n("317d")},c9ce:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return de}));n("a4d3"),n("99af"),n("cb29"),n("4de4"),n("7db0"),n("4160"),n("a630"),n("caad"),n("c975"),n("a15b"),n("d81d"),n("fb6a"),n("a434"),n("c19f"),n("b0c0"),n("6c57"),n("4ec9"),n("2af1"),n("a9e3"),n("8ba4"),n("aff5"),n("4fad"),n("c1f9"),n("dbb4"),n("3410"),n("b64b"),n("d3b7"),n("07ac"),n("4d63"),n("ac1f"),n("25f0"),n("6062"),n("2532"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("2ca0"),n("498a"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("ddb0"),n("130f"),n("bf19");var r=n("2909"),i=n("3835"),o=n("ade3"),s=n("d4ec"),a=n("bee2"),c=n("53ca"),u=n("b85c"),l=Object.defineProperty,h=Object.defineProperties,d=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,m=function(e,t,n){return t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},b=function(e,t){for(var n in t||(t={}))p.call(t,n)&&m(e,n,t[n]);if(f){var r,i=Object(u["a"])(f(t));try{for(i.s();!(r=i.n()).done;){n=r.value;g.call(t,n)&&m(e,n,t[n])}}catch(o){i.e(o)}finally{i.f()}}return e},y=function(e,t){return h(e,d(t))},v=function(e,t){var n={};for(var r in e)p.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&f){var i,o=Object(u["a"])(f(e));try{for(o.s();!(i=o.n()).done;){r=i.value;t.indexOf(r)<0&&g.call(e,r)&&(n[r]=e[r])}}catch(s){o.e(s)}finally{o.f()}}return n},w=function(e,t,n){return m(e,"symbol"!=Object(c["a"])(t)?t+"":t,n),n},_=function(e,t){return(e%t+t)%t},x=function(e,t){if(!e)throw"function"==typeof t&&(t=t()),"string"==typeof t&&(t=Error(t)),t};function k(e,t){void 0===t&&(t=e,e=0);for(var n=-1,r=Math.max(Math.ceil((t-e)/1),0),i=new Array(r);r--;)i[++n]=e,e+=1;return i}var j=function(e){return{circle:function(t,n){var r=[],i=e.rot_dindexes[n][1];return r.push(n*t),k(1,t+1).forEach((function(e){r.push(n*(t-e)-i*e),r.push(n*(t-e)+i*e)})),k(1,t).forEach((function(e){r.push(-n*(t-e)-i*e),r.push(-n*(t-e)+i*e)})),r.push(n*-t),r},box:function(t,n){var r=[],i=e.rot_dindexes[n][1];return k(-t,t+1).forEach((function(e){return r.push(t*n-e*i)})),k(1,2*t).forEach((function(e){r.push((t-e)*n+i*t),r.push((t-e)*n-i*t)})),k(-t,t+1).forEach((function(e){return r.push(-t*n-e*i)})),r},three:function(t,n){var r=t*n,i=e.rot_dindexes[n][1];return[r,r+i,r-i]},cone:function(t,n){var r=t*n,i=[r],o=e.rot_dindexes[n][1];return k(1,t).forEach((function(e){i.push(r+e*o),i.push(r-e*o)})),i},f:function(e,t){return[e*t]},lr:function(t,n){var r=e.rot_dindexes[n][1];return[r*t,-r*t]},cross:function(t,n){return e.rot_dindexes[n].map((function(e){return t*e}))}}};j.list=[],Object.keys(j()).forEach((function(e){j.list.push("__"+e),j.list.push(e)}));var O={},E=["u","l","r","d"],B=["⇧","⇦","⇨","⇩"],A=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.x0,a=void 0===o?0:o,u=i.y0,l=void 0===u?0:u;Object(s["a"])(this,e),w(this,"index2xy",(function(e){return[_(e,r.W),Math.floor(e/r.W)]})),w(this,"xy2index",(function(e){return _(e[0]+e[1]*r.W,r.AREA)})),w(this,"dxy2dindex",(function(e){return e[0]+e[1]*r.W}));var h=t+a-1,d=n+l-1,f=t*n;Object.assign(this,{x0:a,y0:l,W:t,H:n,x_max:h,y_max:d,AREA:f}),this.doCache(),this.look=function(e){var t=j(e),n=function n(i,o){r[i][1][o]||(o>0&&!r[i][1][o-1]&&n(i,o-1),i.startsWith("__")?e.dindexes.forEach((function(e){r[i][e][o]=t[i.slice(2)](o,e)})):(r["__"+i][1][o]||n("__"+i,o),e.dindexes.forEach((function(e){r[i][e][o]=[],k(o+1).forEach((function(t){r[i][e][o]=r[i][e][o].concat(r["__"+i][e][t])}))}))))},r=function e(t,r,i,o){return x(e[t][o],"Invalid dindex: ".concat(o)),x(Number.isInteger(i),"Distance must be an integer not '"+Object(c["a"])(i)),n(t,i),e[t][o][i].map((function(e){return r+e}))};return j.list.forEach((function(t){r[t]={},e.dindexes.forEach((function(e){r[t][e]=[[]]})),n(t,1)})),r}(this)}return Object(a["a"])(e,[{key:"doCache",value:function(){var e,t=this,n=this.W,r=this.H,i=this.x0,s=this.x_max,a=this.y0,c=this.y_max,u=k(n),l=k(r);Object.assign(this,{indexes:[],_dindex2char:{},_name2dindex:{},_dindex2name:{},dindexes:[-n,-1,1,n],rot_dindexes:(e={},Object(o["a"])(e,-n,[-n,-1,1,n]),Object(o["a"])(e,n,[n,1,-1,-n]),Object(o["a"])(e,1,[1,-n,n,-1]),Object(o["a"])(e,-1,[-1,n,-n,1]),e),_indexes_by_y:l.map((function(e){return u.map((function(n){return t.xy2index([n,e])}))})),_indexes_by_x:u.map((function(e){return l.map((function(n){return t.xy2index([e,n])}))}))}),this.dindexes.forEach((function(e,n){var r=E[n];t._dindex2name[e]=r,t._name2dindex[r]=e,t._dindex2char[e]=B[n]})),this.CENTER=this.xy2index([Math.floor((this.x0+this.W)/2),Math.floor((this.y0+this.H)/2)]),k(a,c+1).forEach((function(e){return k(i,s+1).forEach((function(n){return t.indexes.push(t.xy2index([n,e]))}))}))}},{key:"getRowIndexes",value:function(e){return this._indexes_by_y[e]}},{key:"getColumnIndexes",value:function(e){return this._indexes_by_x[e]}},{key:"print",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.from_xy,i=void 0===r?[this.x0,this.y0]:r,o=n.to_xy,s=void 0===o?[this.x0+this.W-1,this.y0+this.H-1]:o,a=n.delimiter,c=void 0===a?"":a,u=n.empty,l=void 0===u?" ":u,h=n.extras,d=n.title,f=k(i[0],s[0]+1),p=k(i[1],s[1]+1).map((function(n){return f.map((function(r){return e[t.xy2index([r,n])]})).map((function(e){return void 0===e?l:e})).join(c)}));return h&&h.forEach((function(e,t){return p[t]+="\t"+e})),d&&p.unshift(d),p.join("\n")}},{key:"inBounds",value:function(e){return e[0]>=this.x0&&e[0]<this.x0+this.W&&e[1]>=this.y0&&e[1]<this.y0+this.H}},{key:"slice",value:function(e,t,n){var r=this,i=[],o=k(e[1],e[1]+n),s=k(e[0],e[0]+t);return o.forEach((function(e){return s.forEach((function(t){return i.push(r.xy2index([t,e]))}))})),i}},{key:"floorDindex",value:function(e){return(e%this.W==0?this.W:1)*Math.sign(e)}}]),e}(),I=function(e,t,n,r){var i="".concat(e,",").concat(t,",").concat(n,",").concat(r);return O[i]=O[i]||new A(e,t,n,r),O[i]},N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function S(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}!function(e){function t(n){if(!(this instanceof t)||this===e.exports)return new t(n);if(!Array.isArray(n)||4!==n.length)throw new TypeError("seed must be an array with 4 numbers");this._state0U=0|n[0],this._state0L=0|n[1],this._state1U=0|n[2],this._state1L=0|n[3]}function n(){return Math.random()*Math.pow(2,32)}t.prototype.randomint=function(){var e=this._state0U,t=this._state0L,n=this._state1U,r=this._state1L,i=(r>>>0)+(t>>>0);resU=n+e+(i/2>>>31)>>>0,resL=i>>>0,this._state0U=n,this._state0L=r;var o=0,s=0;return o=(e^=o=e<<23|(-512&t)>>>9)^n,s=(t^=s=t<<23)^r,o^=e>>>18,s^=t>>>18|(262143&e)<<14,o^=n>>>5,s^=r>>>5|(31&n)<<27,this._state1U=o,this._state1L=s,[resU,resL]},t.prototype.random=function(){var e=this.randomint();return 2.3283064365386963e-10*e[0]+2220446049250313e-31*(e[1]>>>12)},e.exports=new t([n(),n(),n(),n()])}({exports:{}});var M={exports:{}},C=M.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(!a&&S)return S(s);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return i(t[s][1][e]||e)}),c,c.exports,e,t,n,r)}return n[s].exports}for(var o=S,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){(function(r,i,o,s,a,u,l,h,d){var f=e("crypto");function p(e,t){return function(e,t){var n;if(void 0===(n="passthrough"!==t.algorithm?f.createHash(t.algorithm):new w).write&&(n.write=n.update,n.end=n.update),v(t,n).dispatch(e),n.update||n.end(""),n.digest)return n.digest("buffer"===t.encoding?void 0:t.encoding);var r=n.read();return"buffer"!==t.encoding?r.toString(t.encoding):r}(e,t=b(e,t))}(n=t.exports=p).sha1=function(e){return p(e)},n.keys=function(e){return p(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(e){return p(e,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(e){return p(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var g=f.getHashes?f.getHashes().slice():["sha1","md5"];g.push("passthrough");var m=["buffer","hex","binary","base64"];function b(e,t){t=t||{};var n={};if(n.algorithm=t.algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var r=0;r<g.length;++r)g[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=g[r]);if(-1===g.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+g.join(", "));if(-1===m.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+m.join(", "));return n}function y(e){if("function"==typeof e)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function v(e,t,n){function r(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")}return n=n||[],{dispatch:function(t){return e.replacer&&(t=e.replacer(t)),this["_"+(null===t?"null":Object(c["a"])(t))](t)},_object:function(t){var i,s=Object.prototype.toString.call(t),a=/\[object (.*)\]/i.exec(s);if(a=(a=a?a[1]:"unknown:["+s+"]").toLowerCase(),0<=(i=n.indexOf(t)))return this.dispatch("[CIRCULAR:"+i+"]");if(n.push(t),void 0!==o&&o.isBuffer&&o.isBuffer(t))return r("buffer:"),r(t);if("object"===a||"function"===a||"asyncfunction"===a){var c=Object.keys(t);e.unorderedObjects&&(c=c.sort()),!1===e.respectType||y(t)||c.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(c=c.filter((function(t){return!e.excludeKeys(t)}))),r("object:"+c.length+":");var u=this;return c.forEach((function(n){u.dispatch(n),r(":"),e.excludeValues||u.dispatch(t[n]),r(",")}))}if(!this["_"+a]){if(e.ignoreUnknown)return r("["+a+"]");throw new Error('Unknown object type "'+a+'"')}this["_"+a](t)},_array:function(t,i){i=void 0!==i?i:!1!==e.unorderedArrays;var o=this;if(r("array:"+t.length+":"),!i||t.length<=1)return t.forEach((function(e){return o.dispatch(e)}));var s=[],a=t.map((function(t){var r=new w,i=n.slice();return v(e,r,i).dispatch(t),s=s.concat(i.slice(n.length)),r.read().toString()}));return n=n.concat(s),a.sort(),this._array(a,!1)},_date:function(e){return r("date:"+e.toJSON())},_symbol:function(e){return r("symbol:"+e.toString())},_error:function(e){return r("error:"+e.toString())},_boolean:function(e){return r("bool:"+e.toString())},_string:function(e){r("string:"+e.length+":"),r(e.toString())},_function:function(t){r("fn:"),y(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return r("number:"+e.toString())},_xml:function(e){return r("xml:"+e.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(e){return r("regex:"+e.toString())},_uint8array:function(e){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return r("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return r("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return r("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return r("url:"+e.toString())},_map:function(t){r("map:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_set:function(t){r("set:");var n=Array.from(t);return this._array(n,!1!==e.unorderedSets)},_file:function(e){return r("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_bigint:function(e){return r("bigint:"+e.toString())},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function w(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}n.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),v(t=b(e,t),n).dispatch(e)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_7eac155c.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(e,t,n){(function(e,t,r,i,o,s,a,c,u){!function(e){var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),s="A".charCodeAt(0),a="-".charCodeAt(0),c="_".charCodeAt(0);function u(e){var t=e.charCodeAt(0);return t===n||t===a?62:t===r||t===c?63:t<i?-1:t<i+10?t-i+26+26:t<s+26?t-s:t<o+26?t-o+26:void 0}e.toByteArray=function(e){var n,r;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.length,o="="===e.charAt(i-2)?2:"="===e.charAt(i-1)?1:0,s=new t(3*e.length/4-o),a=0<o?e.length-4:e.length,c=0;function l(e){s[c++]=e}for(n=0;n<a;n+=4,0)l((16711680&(r=u(e.charAt(n))<<18|u(e.charAt(n+1))<<12|u(e.charAt(n+2))<<6|u(e.charAt(n+3))))>>16),l((65280&r)>>8),l(255&r);return 2==o?l(255&(r=u(e.charAt(n))<<2|u(e.charAt(n+1))>>4)):1==o&&(l((r=u(e.charAt(n))<<10|u(e.charAt(n+1))<<4|u(e.charAt(n+2))>>2)>>8&255),l(255&r)),s},e.fromByteArray=function(e){var t,n,r,i,o=e.length%3,s="";function a(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,r=e.length-o;t<r;t+=3)s+=a((i=n=(e[t]<<16)+(e[t+1]<<8)+e[t+2])>>18&63)+a(i>>12&63)+a(i>>6&63)+a(63&i);switch(o){case 1:s+=a((n=e[e.length-1])>>2),s+=a(n<<4&63),s+="==";break;case 2:s+=a((n=(e[e.length-2]<<8)+e[e.length-1])>>10),s+=a(n>>4&63),s+=a(n<<2&63),s+="="}return s}}(void 0===n?this.base64js={}:n)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(e,t,n){(function(t,r,i,o,s,a,u,l,h){var d=e("base64-js"),f=e("ieee754");function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var r,o,s,a,u,l=Object(c["a"])(e);if("base64"===t&&"string"==l)for(e=(r=e).trim?r.trim():r.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"==l)o=S(e);else if("string"==l)o=i.byteLength(e,t);else{if("object"!=l)throw new Error("First argument needs to be a number, array or string.");o=S(e.length)}if(i._useTypedArrays?s=i._augment(new Uint8Array(o)):((s=this).length=o,s._isBuffer=!0),i._useTypedArrays&&"number"==typeof e.byteLength)s._set(e);else if(M(u=e)||i.isBuffer(u)||u&&"object"==Object(c["a"])(u)&&"number"==typeof u.length)for(a=0;a<o;a++)i.isBuffer(e)?s[a]=e.readUInt8(a):s[a]=e[a];else if("string"==l)s.write(e,0,t);else if("number"==l&&!i._useTypedArrays&&!n)for(a=0;a<o;a++)s[a]=0;return s}function p(e,t,n,r){return i._charsWritten=V(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function g(e,t,n,r){return i._charsWritten=V(function(e){for(var t,n,r,i=[],o=0;o<e.length;o++)n=(t=e.charCodeAt(o))>>8,r=t%256,i.push(r),i.push(n);return i}(t),e,n,r)}function m(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}function b(e,t,n,r){r||(H("boolean"==typeof n,"missing or invalid endian"),H(null!=t,"missing offset"),H(t+1<e.length,"Trying to read beyond buffer length"));var i,o=e.length;if(!(o<=t))return n?(i=e[t],t+1<o&&(i|=e[t+1]<<8)):(i=e[t]<<8,t+1<o&&(i|=e[t+1])),i}function y(e,t,n,r){r||(H("boolean"==typeof n,"missing or invalid endian"),H(null!=t,"missing offset"),H(t+3<e.length,"Trying to read beyond buffer length"));var i,o=e.length;if(!(o<=t))return n?(t+2<o&&(i=e[t+2]<<16),t+1<o&&(i|=e[t+1]<<8),i|=e[t],t+3<o&&(i+=e[t+3]<<24>>>0)):(t+1<o&&(i=e[t+1]<<16),t+2<o&&(i|=e[t+2]<<8),t+3<o&&(i|=e[t+3]),i+=e[t]<<24>>>0),i}function v(e,t,n,r){if(r||(H("boolean"==typeof n,"missing or invalid endian"),H(null!=t,"missing offset"),H(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t)){var i=b(e,t,n,!0);return 32768&i?-1*(65535-i+1):i}}function w(e,t,n,r){if(r||(H("boolean"==typeof n,"missing or invalid endian"),H(null!=t,"missing offset"),H(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t)){var i=y(e,t,n,!0);return 2147483648&i?-1*(4294967295-i+1):i}}function _(e,t,n,r){return r||(H("boolean"==typeof n,"missing or invalid endian"),H(t+3<e.length,"Trying to read beyond buffer length")),f.read(e,t,n,23,4)}function x(e,t,n,r){return r||(H("boolean"==typeof n,"missing or invalid endian"),H(t+7<e.length,"Trying to read beyond buffer length")),f.read(e,t,n,52,8)}function k(e,t,n,r,i){i||(H(null!=t,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(null!=n,"missing offset"),H(n+1<e.length,"trying to write beyond buffer length"),P(t,65535));var o=e.length;if(!(o<=n))for(var s=0,a=Math.min(o-n,2);s<a;s++)e[n+s]=(t&255<<8*(r?s:1-s))>>>8*(r?s:1-s)}function j(e,t,n,r,i){i||(H(null!=t,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(null!=n,"missing offset"),H(n+3<e.length,"trying to write beyond buffer length"),P(t,4294967295));var o=e.length;if(!(o<=n))for(var s=0,a=Math.min(o-n,4);s<a;s++)e[n+s]=t>>>8*(r?s:3-s)&255}function O(e,t,n,r,i){i||(H(null!=t,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(null!=n,"missing offset"),H(n+1<e.length,"Trying to write beyond buffer length"),W(t,32767,-32768)),e.length<=n||k(e,0<=t?t:65535+t+1,n,r,i)}function E(e,t,n,r,i){i||(H(null!=t,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(null!=n,"missing offset"),H(n+3<e.length,"Trying to write beyond buffer length"),W(t,2147483647,-2147483648)),e.length<=n||j(e,0<=t?t:4294967295+t+1,n,r,i)}function B(e,t,n,r,i){i||(H(null!=t,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(null!=n,"missing offset"),H(n+3<e.length,"Trying to write beyond buffer length"),F(t,34028234663852886e22,-34028234663852886e22)),e.length<=n||f.write(e,t,n,r,23,4)}function A(e,t,n,r,i){i||(H(null!=t,"missing value"),H("boolean"==typeof r,"missing or invalid endian"),H(null!=n,"missing offset"),H(n+7<e.length,"Trying to write beyond buffer length"),F(t,17976931348623157e292,-17976931348623157e292)),e.length<=n||f.write(e,t,n,r,52,8)}n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(n){return!1}}(),i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=L(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=T(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(e,t){if(H(M(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new i(0);if(1===e.length)return e[0];if("number"!=typeof t)for(o=t=0;o<e.length;o++)t+=e[o].length;for(var n=new i(t),r=0,o=0;o<e.length;o++){var s=e[o];s.copy(n,r),r+=s.length}return n},i.prototype.write=function(e,t,n,r){var o;isFinite(t)?isFinite(n)||(r=n,n=void 0):(o=r,r=t,t=n,n=o),t=Number(t)||0;var s,a,c,u,l,h,d,f,m,b=this.length-t;switch((!n||b<(n=Number(n)))&&(n=b),r=String(r||"utf8").toLowerCase()){case"hex":s=function(e,t,n,r){n=Number(n)||0;var o=e.length-n;(!r||o<(r=Number(r)))&&(r=o);var s=t.length;H(s%2==0,"Invalid hex string"),s/2<r&&(r=s/2);for(var a=0;a<r;a++){var c=parseInt(t.substr(2*a,2),16);H(!isNaN(c),"Invalid hex string"),e[n+a]=c}return i._charsWritten=2*a,a}(this,e,t,n);break;case"utf8":case"utf-8":h=this,d=e,f=t,m=n,s=i._charsWritten=V(L(d),h,f,m);break;case"ascii":case"binary":s=p(this,e,t,n);break;case"base64":a=this,c=e,u=t,l=n,s=i._charsWritten=V(T(c),a,u,l);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":s=g(this,e,t,n);break;default:throw new Error("Unknown encoding")}return s},i.prototype.toString=function(e,t,n){var r,i,o,s,a=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(n=void 0!==n?Number(n):n=a.length)===t)return"";switch(e){case"hex":r=function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;o++)i+=C(e[o]);return i}(a,t,n);break;case"utf8":case"utf-8":r=function(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var o=t;o<n;o++)e[o]<=127?(r+=U(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return r+U(i)}(a,t,n);break;case"ascii":case"binary":r=m(a,t,n);break;case"base64":i=a,s=n,r=0===(o=t)&&s===i.length?d.fromByteArray(i):d.fromByteArray(i.slice(o,s));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(a,t,n);break;default:throw new Error("Unknown encoding")}return r},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t=t||0,r!==n&&0!==e.length&&0!==this.length){H(n<=r,"sourceEnd < sourceStart"),H(0<=t&&t<e.length,"targetStart out of bounds"),H(0<=n&&n<this.length,"sourceStart out of bounds"),H(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(o<100||!i._useTypedArrays)for(var s=0;s<o;s++)e[s+t]=this[s+n];else e._set(this.subarray(n,n+o),t)}},i.prototype.slice=function(e,t){var n=this.length;if(e=N(e,n,0),t=N(t,n,n),i._useTypedArrays)return i._augment(this.subarray(e,t));for(var r=t-e,o=new i(r,void 0,!0),s=0;s<r;s++)o[s]=this[s+e];return o},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.readUInt8=function(e,t){if(t||(H(null!=e,"missing offset"),H(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},i.prototype.readUInt16LE=function(e,t){return b(this,e,!0,t)},i.prototype.readUInt16BE=function(e,t){return b(this,e,!1,t)},i.prototype.readUInt32LE=function(e,t){return y(this,e,!0,t)},i.prototype.readUInt32BE=function(e,t){return y(this,e,!1,t)},i.prototype.readInt8=function(e,t){if(t||(H(null!=e,"missing offset"),H(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){return v(this,e,!0,t)},i.prototype.readInt16BE=function(e,t){return v(this,e,!1,t)},i.prototype.readInt32LE=function(e,t){return w(this,e,!0,t)},i.prototype.readInt32BE=function(e,t){return w(this,e,!1,t)},i.prototype.readFloatLE=function(e,t){return _(this,e,!0,t)},i.prototype.readFloatBE=function(e,t){return _(this,e,!1,t)},i.prototype.readDoubleLE=function(e,t){return x(this,e,!0,t)},i.prototype.readDoubleBE=function(e,t){return x(this,e,!1,t)},i.prototype.writeUInt8=function(e,t,n){n||(H(null!=e,"missing value"),H(null!=t,"missing offset"),H(t<this.length,"trying to write beyond buffer length"),P(e,255)),t>=this.length||(this[t]=e)},i.prototype.writeUInt16LE=function(e,t,n){k(this,e,t,!0,n)},i.prototype.writeUInt16BE=function(e,t,n){k(this,e,t,!1,n)},i.prototype.writeUInt32LE=function(e,t,n){j(this,e,t,!0,n)},i.prototype.writeUInt32BE=function(e,t,n){j(this,e,t,!1,n)},i.prototype.writeInt8=function(e,t,n){n||(H(null!=e,"missing value"),H(null!=t,"missing offset"),H(t<this.length,"Trying to write beyond buffer length"),W(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},i.prototype.writeInt16LE=function(e,t,n){O(this,e,t,!0,n)},i.prototype.writeInt16BE=function(e,t,n){O(this,e,t,!1,n)},i.prototype.writeInt32LE=function(e,t,n){E(this,e,t,!0,n)},i.prototype.writeInt32BE=function(e,t,n){E(this,e,t,!1,n)},i.prototype.writeFloatLE=function(e,t,n){B(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){B(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){A(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){A(this,e,t,!1,n)},i.prototype.fill=function(e,t,n){if(e=e||0,t=t||0,n=n||this.length,"string"==typeof e&&(e=e.charCodeAt(0)),H("number"==typeof e&&!isNaN(e),"value is not a number"),H(t<=n,"end < start"),n!==t&&0!==this.length){H(0<=t&&t<this.length,"start out of bounds"),H(0<=n&&n<=this.length,"end out of bounds");for(var r=t;r<n;r++)this[r]=e}},i.prototype.inspect=function(){for(var e=[],t=this.length,r=0;r<t;r++)if(e[r]=C(this[r]),r===n.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(i._useTypedArrays)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var I=i.prototype;function N(e,t,n){return"number"!=typeof e?n:t<=(e=~~e)?t:0<=e||0<=(e+=t)?e:0}function S(e){return(e=~~Math.ceil(+e))<0?0:e}function M(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function C(e){return e<16?"0"+e.toString(16):e.toString(16)}function L(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(e.charCodeAt(n));else{var i=n;55296<=r&&r<=57343&&n++;for(var o=encodeURIComponent(e.slice(i,n+1)).substr(1).split("%"),s=0;s<o.length;s++)t.push(parseInt(o[s],16))}}return t}function T(e){return d.toByteArray(e)}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function U(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function P(e,t){H("number"==typeof e,"cannot write a non-number as a number"),H(0<=e,"specified a negative value for writing an unsigned value"),H(e<=t,"value is larger than maximum value for type"),H(Math.floor(e)===e,"value has a fractional component")}function W(e,t,n){H("number"==typeof e,"cannot write a non-number as a number"),H(e<=t,"value larger than maximum allowed value"),H(n<=e,"value smaller than minimum allowed value"),H(Math.floor(e)===e,"value has a fractional component")}function F(e,t,n){H("number"==typeof e,"cannot write a non-number as a number"),H(e<=t,"value larger than maximum allowed value"),H(n<=e,"value smaller than minimum allowed value")}function H(e,t){if(!e)throw new Error(t||"Failed assertion")}i._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=I.get,e.set=I.set,e.write=I.write,e.toString=I.toString,e.toLocaleString=I.toString,e.toJSON=I.toJSON,e.copy=I.copy,e.slice=I.slice,e.readUInt8=I.readUInt8,e.readUInt16LE=I.readUInt16LE,e.readUInt16BE=I.readUInt16BE,e.readUInt32LE=I.readUInt32LE,e.readUInt32BE=I.readUInt32BE,e.readInt8=I.readInt8,e.readInt16LE=I.readInt16LE,e.readInt16BE=I.readInt16BE,e.readInt32LE=I.readInt32LE,e.readInt32BE=I.readInt32BE,e.readFloatLE=I.readFloatLE,e.readFloatBE=I.readFloatBE,e.readDoubleLE=I.readDoubleLE,e.readDoubleBE=I.readDoubleBE,e.writeUInt8=I.writeUInt8,e.writeUInt16LE=I.writeUInt16LE,e.writeUInt16BE=I.writeUInt16BE,e.writeUInt32LE=I.writeUInt32LE,e.writeUInt32BE=I.writeUInt32BE,e.writeInt8=I.writeInt8,e.writeInt16LE=I.writeInt16LE,e.writeInt16BE=I.writeInt16BE,e.writeInt32LE=I.writeInt32LE,e.writeInt32BE=I.writeInt32BE,e.writeFloatLE=I.writeFloatLE,e.writeFloatBE=I.writeFloatBE,e.writeDoubleLE=I.writeDoubleLE,e.writeDoubleBE=I.writeDoubleBE,e.fill=I.fill,e.inspect=I.inspect,e.toArrayBuffer=I.toArrayBuffer,e}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(e,t,n){(function(n,r,i,o,s,a,c,u,l){i=e("buffer").Buffer;var h=4,d=new i(h);d.fill(0),t.exports={hash:function(e,t,n,r){return i.isBuffer(e)||(e=new i(e)),function(e,t,n){for(var r=new i(t),o=n?r.writeInt32BE:r.writeInt32LE,s=0;s<e.length;s++)o.call(r,e[s],4*s,!0);return r}(t(function(e,t){var n;e.length%h!=0&&(n=e.length+(h-e.length%h),e=i.concat([e,d],n));for(var r=[],o=t?e.readInt32BE:e.readInt32LE,s=0;s<e.length;s+=h)r.push(o.call(e,s));return r}(e,r),8*e.length),n,r)}}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(e,t,n){(function(t,r,i,o,s,a,c,u,l){i=e("buffer").Buffer;var h=e("./sha"),d=e("./sha256"),f=e("./rng"),p={sha1:h,sha256:d,md5:e("./md5")},g=64,m=new i(g);function b(e,t){var n=p[e=e||"sha1"],r=[];return n||y("algorithm:",e,"is not yet supported"),{update:function(e){return i.isBuffer(e)||(e=new i(e)),r.push(e),e.length,this},digest:function(e){var o=i.concat(r),s=t?function(e,t,n){i.isBuffer(t)||(t=new i(t)),i.isBuffer(n)||(n=new i(n)),t.length>g?t=e(t):t.length<g&&(t=i.concat([t,m],g));for(var r=new i(g),o=new i(g),s=0;s<g;s++)r[s]=54^t[s],o[s]=92^t[s];var a=e(i.concat([r,n]));return e(i.concat([o,a]))}(n,t,o):n(o);return r=null,e?s.toString(e):s}}}function y(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}m.fill(0),n.createHash=function(e){return b(e)},n.createHmac=b,n.randomBytes=function(e,t){if(!t||!t.call)return new i(f(e));try{t.call(this,void 0,new i(f(e)))}catch(n){t(n)}},function(e,t){for(var n in e)t(e[n],n)}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],(function(e){n[e]=function(){y("sorry,",e,"is not implemented yet")}}))}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(e,t,n){(function(n,r,i,o,s,a,c,u,l){var h=e("./helpers");function d(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,c=r,u=i,l=o;n=p(n,r,i,o,e[s+0],7,-680876936),o=p(o,n,r,i,e[s+1],12,-389564586),i=p(i,o,n,r,e[s+2],17,606105819),r=p(r,i,o,n,e[s+3],22,-1044525330),n=p(n,r,i,o,e[s+4],7,-176418897),o=p(o,n,r,i,e[s+5],12,1200080426),i=p(i,o,n,r,e[s+6],17,-1473231341),r=p(r,i,o,n,e[s+7],22,-45705983),n=p(n,r,i,o,e[s+8],7,1770035416),o=p(o,n,r,i,e[s+9],12,-1958414417),i=p(i,o,n,r,e[s+10],17,-42063),r=p(r,i,o,n,e[s+11],22,-1990404162),n=p(n,r,i,o,e[s+12],7,1804603682),o=p(o,n,r,i,e[s+13],12,-40341101),i=p(i,o,n,r,e[s+14],17,-1502002290),n=g(n,r=p(r,i,o,n,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=g(o,n,r,i,e[s+6],9,-1069501632),i=g(i,o,n,r,e[s+11],14,643717713),r=g(r,i,o,n,e[s+0],20,-373897302),n=g(n,r,i,o,e[s+5],5,-701558691),o=g(o,n,r,i,e[s+10],9,38016083),i=g(i,o,n,r,e[s+15],14,-660478335),r=g(r,i,o,n,e[s+4],20,-405537848),n=g(n,r,i,o,e[s+9],5,568446438),o=g(o,n,r,i,e[s+14],9,-1019803690),i=g(i,o,n,r,e[s+3],14,-187363961),r=g(r,i,o,n,e[s+8],20,1163531501),n=g(n,r,i,o,e[s+13],5,-1444681467),o=g(o,n,r,i,e[s+2],9,-51403784),i=g(i,o,n,r,e[s+7],14,1735328473),n=m(n,r=g(r,i,o,n,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=m(o,n,r,i,e[s+8],11,-2022574463),i=m(i,o,n,r,e[s+11],16,1839030562),r=m(r,i,o,n,e[s+14],23,-35309556),n=m(n,r,i,o,e[s+1],4,-1530992060),o=m(o,n,r,i,e[s+4],11,1272893353),i=m(i,o,n,r,e[s+7],16,-155497632),r=m(r,i,o,n,e[s+10],23,-1094730640),n=m(n,r,i,o,e[s+13],4,681279174),o=m(o,n,r,i,e[s+0],11,-358537222),i=m(i,o,n,r,e[s+3],16,-722521979),r=m(r,i,o,n,e[s+6],23,76029189),n=m(n,r,i,o,e[s+9],4,-640364487),o=m(o,n,r,i,e[s+12],11,-421815835),i=m(i,o,n,r,e[s+15],16,530742520),n=b(n,r=m(r,i,o,n,e[s+2],23,-995338651),i,o,e[s+0],6,-198630844),o=b(o,n,r,i,e[s+7],10,1126891415),i=b(i,o,n,r,e[s+14],15,-1416354905),r=b(r,i,o,n,e[s+5],21,-57434055),n=b(n,r,i,o,e[s+12],6,1700485571),o=b(o,n,r,i,e[s+3],10,-1894986606),i=b(i,o,n,r,e[s+10],15,-1051523),r=b(r,i,o,n,e[s+1],21,-2054922799),n=b(n,r,i,o,e[s+8],6,1873313359),o=b(o,n,r,i,e[s+15],10,-30611744),i=b(i,o,n,r,e[s+6],15,-1560198380),r=b(r,i,o,n,e[s+13],21,1309151649),n=b(n,r,i,o,e[s+4],6,-145523070),o=b(o,n,r,i,e[s+11],10,-1120210379),i=b(i,o,n,r,e[s+2],15,718787259),r=b(r,i,o,n,e[s+9],21,-343485551),n=y(n,a),r=y(r,c),i=y(i,u),o=y(o,l)}return Array(n,r,i,o)}function f(e,t,n,r,i,o){return y((s=y(y(t,e),y(r,o)))<<(a=i)|s>>>32-a,n);var s,a}function p(e,t,n,r,i,o,s){return f(t&n|~t&r,e,t,i,o,s)}function g(e,t,n,r,i,o,s){return f(t&r|n&~r,e,t,i,o,s)}function m(e,t,n,r,i,o,s){return f(t^n^r,e,t,i,o,s)}function b(e,t,n,r,i,o,s){return f(n^(t|~r),e,t,i,o,s)}function y(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.exports=function(e){return h.hash(e,d,16)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(e,t,n){(function(e,n,r,i,o,s,a,c,u){var l;l=function(e){for(var t,n=new Array(e),r=0;r<e;r++)0==(3&r)&&(t=4294967296*Math.random()),n[r]=t>>>((3&r)<<3)&255;return n},t.exports=l}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(e,t,n){(function(n,r,i,o,s,a,c,u,l){var h=e("./helpers");function d(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n,r,i,o,s,a=Array(80),c=1732584193,u=-271733879,l=-1732584194,h=271733878,d=-1009589776,g=0;g<e.length;g+=16){for(var m=c,b=u,y=l,v=h,w=d,_=0;_<80;_++){a[_]=_<16?e[g+_]:p(a[_-3]^a[_-8]^a[_-14]^a[_-16],1);var x=f(f(p(c,5),(i=u,o=l,s=h,(r=_)<20?i&o|~i&s:!(r<40)&&r<60?i&o|i&s|o&s:i^o^s)),f(f(d,a[_]),(n=_)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));d=h,h=l,l=p(u,30),u=c,c=x}c=f(c,m),u=f(u,b),l=f(l,y),h=f(h,v),d=f(d,w)}return Array(c,u,l,h,d)}function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function p(e,t){return e<<t|e>>>32-t}t.exports=function(e){return h.hash(e,d,20,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(e,t,n){(function(n,r,i,o,s,a,c,u,l){function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function d(e,t){return e>>>t|e<<32-t}function f(e,t){var n,r,i,o,s,a,c,u,l,f,p=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),g=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),m=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var b,y,v,w,_,x,k,j,O=0;O<e.length;O+=16){n=g[0],r=g[1],i=g[2],o=g[3],s=g[4],a=g[5],c=g[6],u=g[7];for(var E=0;E<64;E++)m[E]=E<16?e[E+O]:h(h(h(d(j=m[E-2],17)^d(j,19)^j>>>10,m[E-7]),d(k=m[E-15],7)^d(k,18)^k>>>3),m[E-16]),l=h(h(h(h(u,d(x=s,6)^d(x,11)^d(x,25)),(_=s)&a^~_&c),p[E]),m[E]),f=h(d(w=n,2)^d(w,13)^d(w,22),(b=n)&(y=r)^b&(v=i)^y&v),u=c,c=a,a=s,s=h(o,l),o=i,i=r,r=n,n=h(l,f);g[0]=h(n,g[0]),g[1]=h(r,g[1]),g[2]=h(i,g[2]),g[3]=h(o,g[3]),g[4]=h(s,g[4]),g[5]=h(a,g[5]),g[6]=h(c,g[6]),g[7]=h(u,g[7])}return g}var p=e("./helpers");t.exports=function(e){return p.hash(e,f,32,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(e,t,n){(function(e,n,r,i,o,s,a,c,u){function l(){}(e=t.exports={}).nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",(function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<n.length&&n.shift()())}),!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=l,e.addListener=l,e.once=l,e.off=l,e.removeListener=l,e.removeAllListeners=l,e.emit=l,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(e,t,n){(function(e,t,r,i,o,s,a,c,u){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=a;0<l;o=256*o+e[t+h],h+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+h],h+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=u}return(f?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),2<=(t+=1<=s+h?d/c:d*Math.pow(2,1-h))*c&&(s++,c/=2),l<=s+h?(a=0,s=l):1<=s+h?(a=(t*c-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));8<=i;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+f]=255&s,f+=p,s/=256,u-=8);e[n+f-p]|=128*g}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1),L={exports:{}};!function(e,t){var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object Boolean]",s="[object Date]",a="[object Function]",u="[object GeneratorFunction]",l="[object Map]",h="[object Number]",d="[object Object]",f="[object Promise]",p="[object RegExp]",g="[object Set]",m="[object String]",b="[object Symbol]",y="[object WeakMap]",v="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",x="[object Float64Array]",k="[object Int8Array]",j="[object Int16Array]",O="[object Int32Array]",E="[object Uint8Array]",B="[object Uint8ClampedArray]",A="[object Uint16Array]",I="[object Uint32Array]",S=/\w*$/,M=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,L={};L[i]=L["[object Array]"]=L[v]=L[w]=L[o]=L[s]=L[_]=L[x]=L[k]=L[j]=L[O]=L[l]=L[h]=L[d]=L[p]=L[g]=L[m]=L[b]=L[E]=L[B]=L[A]=L[I]=!0,L["[object Error]"]=L[a]=L[y]=!1;var T="object"==Object(c["a"])(N)&&N&&N.Object===Object&&N,V="object"==("undefined"===typeof self?"undefined":Object(c["a"])(self))&&self&&self.Object===Object&&self,U=T||V||Function("return this")(),P=t&&!t.nodeType&&t,W=P&&e&&!e.nodeType&&e,F=W&&W.exports===P;function H(e,t){return e.set(t[0],t[1]),e}function D(e,t){return e.add(t),e}function q(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function R(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function Y(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function G(e,t){return function(n){return e(t(n))}}function $(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var z,K=Array.prototype,J=Function.prototype,X=Object.prototype,Q=U["__core-js_shared__"],Z=(z=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",ee=J.toString,te=X.hasOwnProperty,ne=X.toString,re=RegExp("^"+ee.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ie=F?U.Buffer:void 0,oe=U.Symbol,se=U.Uint8Array,ae=G(Object.getPrototypeOf,Object),ce=Object.create,ue=X.propertyIsEnumerable,le=K.splice,he=Object.getOwnPropertySymbols,de=ie?ie.isBuffer:void 0,fe=G(Object.keys,Object),pe=We(U,"DataView"),ge=We(U,"Map"),me=We(U,"Promise"),be=We(U,"Set"),ye=We(U,"WeakMap"),ve=We(Object,"create"),we=Re(pe),_e=Re(ge),xe=Re(me),ke=Re(be),je=Re(ye),Oe=oe?oe.prototype:void 0,Ee=Oe?Oe.valueOf:void 0;function Be(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ne(e){this.__data__=new Ae(e)}function Se(e,t){var n=Ge(e)||function(e){return function(e){return function(e){return!!e&&"object"==Object(c["a"])(e)}(e)&&$e(e)}(e)&&te.call(e,"callee")&&(!ue.call(e,"callee")||ne.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var s in e)!t&&!te.call(e,s)||o&&("length"==s||De(s,r))||n.push(s);return n}function Me(e,t,n){var r=e[t];te.call(e,t)&&Ye(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Ce(e,t){for(var n=e.length;n--;)if(Ye(e[n][0],t))return n;return-1}function Le(e,t,n,r,c,f,y){var N;if(r&&(N=f?r(e,c,f,y):r(e)),void 0!==N)return N;if(!Je(e))return e;var M=Ge(e);if(M){if(N=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&te.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!t)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e,N)}else{var C=He(e),T=C==a||C==u;if(ze(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(C==d||C==i||T&&!f){if(R(e))return f?e:{};if(N=function(e){return"function"!=typeof e.constructor||qe(e)?{}:(t=ae(e),Je(t)?ce(t):{});var t}(T?{}:e),!t)return function(e,t){return Ue(e,Fe(e),t)}(e,function(e,t){return e&&Ue(t,Xe(t),e)}(N,e))}else{if(!L[C])return f?e:{};N=function(e,t,n,r){var i,a=e.constructor;switch(t){case v:return Ve(e);case o:case s:return new a(+e);case w:return function(e,t){var n=t?Ve(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case _:case x:case k:case j:case O:case E:case B:case A:case I:return function(e,t){var n=t?Ve(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case l:return function(e,t,n){return q(t?n(Y(e),!0):Y(e),H,new e.constructor)}(e,r,n);case h:case m:return new a(e);case p:return function(e){var t=new e.constructor(e.source,S.exec(e));return t.lastIndex=e.lastIndex,t}(e);case g:return function(e,t,n){return q(t?n($(e),!0):$(e),D,new e.constructor)}(e,r,n);case b:return i=e,Ee?Object(Ee.call(i)):{}}}(e,C,Le,t)}}y||(y=new Ne);var V=y.get(e);if(V)return V;if(y.set(e,N),!M)var U=n?function(e){return function(e,t,n){var r=t(e);return Ge(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Xe,Fe)}(e):Xe(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(U||e,(function(i,o){U&&(i=e[o=i]),Me(N,o,Le(i,t,n,r,o,e,y))})),N}function Te(e){return!(!Je(e)||(t=e,Z&&Z in t))&&(Ke(e)||R(e)?re:M).test(Re(e));var t}function Ve(e){var t=new e.constructor(e.byteLength);return new se(t).set(new se(e)),t}function Ue(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=r?r(n[s],e[s],s,n,e):void 0;Me(n,s,void 0===a?e[s]:a)}return n}function Pe(e,t){var n,r,i=e.__data__;return("string"==(r=Object(c["a"])(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function We(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Te(n)?n:void 0}Be.prototype.clear=function(){this.__data__=ve?ve(null):{}},Be.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Be.prototype.get=function(e){var t=this.__data__;if(ve){var r=t[e];return r===n?void 0:r}return te.call(t,e)?t[e]:void 0},Be.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:te.call(t,e)},Be.prototype.set=function(e,t){return this.__data__[e]=ve&&void 0===t?n:t,this},Ae.prototype.clear=function(){this.__data__=[]},Ae.prototype.delete=function(e){var t=this.__data__,n=Ce(t,e);return!(n<0)&&(n==t.length-1?t.pop():le.call(t,n,1),!0)},Ae.prototype.get=function(e){var t=this.__data__,n=Ce(t,e);return n<0?void 0:t[n][1]},Ae.prototype.has=function(e){return Ce(this.__data__,e)>-1},Ae.prototype.set=function(e,t){var n=this.__data__,r=Ce(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Ie.prototype.clear=function(){this.__data__={hash:new Be,map:new(ge||Ae),string:new Be}},Ie.prototype.delete=function(e){return Pe(this,e).delete(e)},Ie.prototype.get=function(e){return Pe(this,e).get(e)},Ie.prototype.has=function(e){return Pe(this,e).has(e)},Ie.prototype.set=function(e,t){return Pe(this,e).set(e,t),this},Ne.prototype.clear=function(){this.__data__=new Ae},Ne.prototype.delete=function(e){return this.__data__.delete(e)},Ne.prototype.get=function(e){return this.__data__.get(e)},Ne.prototype.has=function(e){return this.__data__.has(e)},Ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ae){var r=n.__data__;if(!ge||r.length<199)return r.push([e,t]),this;n=this.__data__=new Ie(r)}return n.set(e,t),this};var Fe=he?G(he,Object):function(){return[]},He=function(e){return ne.call(e)};function De(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||C.test(e))&&e>-1&&e%1==0&&e<t}function qe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function Re(e){if(null!=e){try{return ee.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ye(e,t){return e===t||e!=e&&t!=t}(pe&&He(new pe(new ArrayBuffer(1)))!=w||ge&&He(new ge)!=l||me&&He(me.resolve())!=f||be&&He(new be)!=g||ye&&He(new ye)!=y)&&(He=function(e){var t=ne.call(e),n=t==d?e.constructor:void 0,r=n?Re(n):void 0;if(r)switch(r){case we:return w;case _e:return l;case xe:return f;case ke:return g;case je:return y}return t});var Ge=Array.isArray;function $e(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!Ke(e)}var ze=de||function(){return!1};function Ke(e){var t=Je(e)?ne.call(e):"";return t==a||t==u}function Je(e){var t=Object(c["a"])(e);return!!e&&("object"==t||"function"==t)}function Xe(e){return $e(e)?Se(e):function(e){if(!qe(e))return fe(e);var t=[];for(var n in Object(e))te.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}e.exports=function(e){return Le(e,!0,!0)}}(L,L.exports);var T=L.exports,V=BigInt(114007148193232e5),U=BigInt(0xbf58476d1ce4e800),P=BigInt(0x94d049bb13311000),W=BigInt(30),F=BigInt(27),H=BigInt(31),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(Number.MAX_SAFE_INTEGER),n=BigInt(e),r=function(){n+=V;var e=n;return e^=(e>>W)*U,e^=(e>>F)*P,e^=e>>H,Number(e%t)};return r.choice=function(e){return e[r()%e.length]},r},q={t:{dxs:[0,1,-1,0],dys:[0,0,0,-1],max_spin:4},l:{dxs:[0,1,-1,-1],dys:[0,0,0,-1],max_spin:4},j:{dxs:[0,1,-1,1],dys:[0,0,0,-1],max_spin:4},z:{dxs:[0,-1,1,0],dys:[0,0,1,1],max_spin:2},s:{dxs:[0,1,-1,0],dys:[0,0,1,1],max_spin:2},i:{dxs:[0,1,-1,2],dys:[0,0,0,0],max_spin:2},o:{dxs:[0,1,1,0],dys:[0,0,1,1],max_spin:1}},R=[];Object.entries(q).forEach((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];r.shape=n,R.push(r),r.dxys=r.dxs.map((function(e,t){return[e,r.dys[t]]}))}));var Y=R.map((function(e){return e.shape})),G=y(b({all:R,shapes:Y},q),{WALL:"W",ASH:"A",COLD:"C",HOT:"H",SINGLET:"1",generator:function(e){var t;if((null==(t=(e=e||(new Date).valueOf()%256).match)?void 0:t.call(e,/^\d+$/))&&(e=Number(e)),"number"==typeof e){var n=D(e);return function(){return n.choice(Y)}}if(q[e[0]]){var r=0;return function(){return e[r++%e.length]}}throw"Unknown generator: ".concat(e)}}),$=G.ASH,z=function(e){return e.toString().toLowerCase().trim().replace(/(\w)\'/g,"$1").replace(/[^a-z0-9_]+/g,"-")},K=function(){function e(t){Object(s["a"])(this,e);var n=t.id,r=t.name,i=t.rules,o=t.version,a=void 0===o?"1":o;Object.assign(this,{id:n,name:r,rules:i,version:a}),this.key="".concat(n,"-").concat(a),this.slug=z(r)}return Object(a["a"])(e,[{key:"getLevelOptions",value:function(e){var t=T(this.rules),n=this.key;return t.b={algorithm:"mod8",lines:4*e},{campaign:{level:e,key:n},rules:t}}},{key:"getNextLevelText",value:function(e){return"Advance to ".concat(this.name," ").concat(e+1)}},{key:"getLevelSlug",value:function(e){return z("".concat(this.name,"-").concat(e))}},{key:"getName",value:function(e){return"".concat(this.name," lvl #").concat(e)}},{key:"getRemainingLines",value:function(e){var t,n,i=(null==(n=null==(t=e.entities[$])?void 0:t.indexes)?void 0:n.map(e.geo.index2xy))||[];return Object(r["a"])(new Set(i.map((function(e){return e[1]})))).length}},{key:"getRemainingText",value:function(e){return"".concat(this.getRemainingLines(e)," lines left")}}]),e}();K.list=[[1,"Cascade",{cascade:!0}],[2,"Sticky Bomb",{sticky:!0,sticky_bomb:!0}],[3,"Hot Fission",{nuclear:{type:"fission",temperature:"hot"}}],[4,"Cold Fusion",{nuclear:{type:"fusion",temperature:"cold"}}]].map((function(e){var t=Object(i["a"])(e,4),n=t[0],r=t[1],o=t[2],s=t[3];return new K({id:n,name:r,rules:o,version:s})})),K.get=function(e){var t=e.key;return K.list.find((function(e){return e.key===t}))};var J={mod8:function(e){var t=D(e);return function(){return t()%8}}},X={},Q=new I(4,4);G.all.forEach((function(e){var t={},n=e.dxys.map((function(e){return Q.dxy2dindex(e)}));e.dxys.forEach((function(e){return t[Q.xy2index(e)]=!0})),X[e.shape]=n.map((function(e){return[-4,-1,1,4].map((function(t){return n.includes(t+e)?0:1})).join("")}))}));var Z=function(e){return JSON.parse(JSON.stringify(e))},ee=function(){function e(t,n){Object(s["a"])(this,e),Object.assign(this,{board:t,options:n}),this.current={frame:0,subframe:0},this._cache={},this.frames=[]}return Object(a["a"])(e,[{key:"last_frame",get:function(){return this.frames[this.frames.length-1]}},{key:"_trlb",value:function(e,t){var n=this.board,r=n.geo,i=n.indexes;return r.dindexes.map((function(n){return i[n+e]===t?0:1})).join("")}},{key:"_newPiece",value:function(e){var t=this,n=this.board,r=this.options.scale,o={id:e.id,blocks:e.indexes.map((function(o,s){var a=n.geo.index2xy(o),c=Object(i["a"])(a,2),u=c[0],l=c[1];return{x:u*r,y:l*r,key:e.block_ids[s],href:"#".concat(e.shape,"-").concat(t._trlb(o,e.id))}}))},s=o.blocks[0];return void 0!==e.charges&&s&&(o.charges={text:e.charges,transform:"translate(".concat(s.x,", ").concat(s.y,")")}),o}},{key:"draw",value:function(){var e,t=this,n=this.board,r=this.options.scale,i=Math.min(n._skyline+17,n.geo.H),o=6-Math.max(0,i-17),s=Object.values(n.entities);s.forEach((function(e){t._cache[e.id]=t._newPiece(e)})),s.reverse();var a={initial_state:{entities:s.map((function(e){return t._cache[e.id]})),piece_queue:this.renderQueue(),stash:this.renderStash(),frame_number:this.frames.length,ghost:this.renderGhost(null==(e=n.current_piece)?void 0:e.indexes),y_shift:o,animations:[],scores:this.getScores()},actions:[]},c=n._skyline,u=n._sealevel;a.debug=function(){var e={texts:[],rects:[],lines:[]};return t.options.debug.annotate&&(e.lines.push(t.debugLine(c*r,"orange")),e.lines.push(t.debugLine(u*r,"blue")),Array(1+Math.ceil(n.geo.H/5)).fill(0).forEach((function(n,i){var o={x:r*(t.board.geo.W-1),y:5*i*r,width:r,key:"debug-".concat(i)};e.rects.push(y(b({},o),{height:r,fill:"pink"})),e.texts.push(y(b({},o),{text:"y"+5*i,y:o.y+.7*r}))}))),e},this.frames.push(a)}},{key:"debug",value:function(){var e=this.frames[this.current.frame];return null==e?void 0:e.debug()}},{key:"markStale",value:function(e){delete this._cache[e]}},{key:"setTimeout",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}))},{key:"next",value:function(e){var t=this.frames[this.current.frame],n=this.current.subframe<t.actions.length;if((this.current.frame!==this.frames.length-1||n)&&!this.board._paused_at){this.current.subframe<t.actions.length?(t.actions[this.current.subframe](),this.current.subframe++):(this.current.frame++,this.goToFrame(this.current.frame));var r=this.delay,i=void 0===r?50:r;delete this.delay,this.setTimeout(e,i)}}},{key:"restart",value:function(e){this.goToFrame(0),this.setTimeout(e,50)}},{key:"goToFrame",value:function(e){this.current.frame=e,this.current.subframe=0,this.state=Z(this.frames[e].initial_state)}},{key:"getGhost",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.board.geo,r=n.W,i=n.H,o=r*i-1,s=i;s--;){var a=t.map((function(e){return e+r}));if(void 0!==a.find((function(t){return t>o||void 0!==e.board.indexes[t]&&e.board.indexes[t]!==e.board.current_piece.id})))break;t=a}return t}},{key:"renderGhost",value:function(e){var t=this,n=this.options,r=n.scale,o=n.buffer,s=this.getGhost(e),a=function(e){return!(t.board.indexes[e]||s.includes(e))},c=function(e){return void 0===t.board.geo.getRowIndexes(e).find(a)};return{id:"ghost",blocks:s.map((function(e){var n=t.board.geo.index2xy(e),s=Object(i["a"])(n,2),a=s[0],u=s[1];return{key:Math.random(),x:a*r+o,y:u*r+o,width:r-2*o,height:r-2*o,fill:"none","stroke-width":o,stroke:c(u)?"red":"gray","stroke-dasharray":4}}))}}},{key:"renderQueue",value:function(){var e=this.options.scale;return this.board.piece_queue.map((function(t,n){return{id:"queue-".concat(n),blocks:G[t].dxys.map((function(r,o){var s=Object(i["a"])(r,2),a=s[0],c=s[1];return{x:(2+a)*e,y:(2+c+3*n)*e,key:"queue-".concat(n,"-").concat([a,c]),href:"#".concat(t,"-").concat(X[t][o])}}))}}))}},{key:"renderStash",value:function(){var e,t=this.board.stash,n=this.options.scale;return null==(e=G[t])?void 0:e.dxys.map((function(e,r){var o=Object(i["a"])(e,2),s=o[0],a=o[1];return{x:(2+s)*n,y:(2+a)*n,key:"stash-".concat([s,a]),href:"#".concat(t,"-").concat(X[t][r])}}))}},{key:"debugLine",value:function(e,t){var n=this.board.geo.W,r=this.options.scale;return{y:e,stroke:t,x:-r,width:(n+2)*r,height:3,fill:"none","stroke-width":2}}},{key:"removeBlocks",value:function(e){var t=this,n=e.block_ids;this.last_frame.actions.push((function(){var r=t.state.entities.find((function(t){return t.id===e.id}));r.blocks=r.blocks.filter((function(e){return n.includes(e.id)}))}))}},{key:"moveBlocks",value:function(e){var t=this,n=this.last_frame,r=this._newPiece(e),i=this.renderGhost(this.board.current_piece.indexes);n.actions.push((function(){var n=t.state.entities.find((function(t){return t.id===e.id}));Object.assign(n,r),t.state.ghost=i}))}},{key:"moveCurrent",value:function(){this.moveBlocks(this.board.current_piece)}},{key:"stash",value:function(e,t){var n=this;e=Z(e),this.last_frame.actions.push((function(){n.state.entities=n.state.entities.filter((function(e){return e.id!==t})),n.state.entities.push(n._newPiece(e)),n.state.ghost=n.renderGhost(e.indexes),n.state.stash=n.renderStash()}))}},{key:"flashLines",value:function(e){var t=this;if(e.length){var n=this.last_frame,r=this.options.scale;n.actions.push((function(){t.delay=300,e.forEach((function(e){t.state.animations.unshift({key:Math.random(),transform:"translate(0, ".concat(e*r,")"),rect:{height:r,width:r*t.board.geo.W,fill:"pink"}})}))}))}}},{key:"addNukes",value:function(e){var t=this;e=Z(e);var n=this.last_frame,r=this.options.scale;n.actions.push((function(){e.forEach((function(e){var n=t._newPiece(e);t.state.entities.push(n),t.state.animations.push({key:Math.random(),transform:"translate(".concat(n.blocks[0].x,", ").concat(n.blocks[0].y,")"),class:"animation -nuke",rect:{width:r,height:r,fill:"url(#".concat(e.shape,"Hatch)")}})}))}))}},{key:"getScores",value:function(){var e=this,t=this.board.campaign;if(!t)return[];var n=this.last_frame,r=this.board.actions.filter((function(e){return void 0!==e.index})).length;return 0===t.getRemainingLines(this.board)?n.actions.push((function(){return e.board.mitt.emit("render-victory")})):this.board.gameover&&n.actions.push((function(){return e.board.mitt.emit("render-gameover")})),[t.getRemainingText(this.board),"".concat(r," pieces placed")]}},{key:"moveNukes",value:function(e){var t=this,n=this.last_frame,r=e.map((function(e){return t._newPiece(e)}));n.actions.push((function(){r.forEach((function(e){var n=t.state.entities.find((function(t){return t.id===e.id}));Object.assign(n,e)}))}))}}]),e}(),te={rotate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this.current_piece,r=n.shape,i=n.index,o=n.spin,s=n.id,a=_(o+t,4),c=this._rotation_cache[r][a].map((function(e){return e+i}));void 0===c.map((function(t){return e.indexes[t]})).find((function(e){return e&&e!==s}))&&(this.current_piece.spin=a,this.current_piece.indexes=c,this._placePiece(this.current_piece),this.renderer.moveCurrent())},_moveCurrent:function(e){var t=this.current_piece,n=t.indexes.map((function(t){return t+e}));t.indexes=n,this._placePiece(t),t.index+=e},down:function(){this.canMoveCurrent(this.geo.W)?(this._moveCurrent(this.geo.W),this.renderer.moveCurrent()):this.nextTurn()},left:function(){this.canMoveCurrent(-1)&&(this._moveCurrent(-1),this.renderer.moveCurrent())},right:function(){this.canMoveCurrent(1)&&(this._moveCurrent(1),this.renderer.moveCurrent())},drop:function(){this._dropping=!0;for(var e=1;e<this.geo.H&&this.canMoveCurrent(this.geo.W*e);)e++;e--,this._moveCurrent(e*this.geo.W),this.renderer.moveCurrent()},lock:function(){this._dropping&&(this.drop(),this.nextTurn()),delete this._dropping}},ne=G.WALL,re=G.ASH,ie=G.HOT,oe=G.COLD,se=G.SINGLET,ae=function(e){return new Array(e).fill(0).map((function(e,t){return t}))},ce=Math.ceil(5.5),ue=22-ce,le="0123456789abcdefghijklmnopqrstuvwxyz",he=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s["a"])(this,e);var n,r=t,i=r.id,o=r.render_options,a=void 0===o?{}:o,c=v(r,["id","render_options"]);window.b=this,Object.assign(this,te),this.options=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e,n=t.rules,r=void 0===n?{}:n,i=v(t,["rules"]),o=i.W,s=void 0===o?10:o,a=i.H,c=void 0===a?60:a;return i._geo={W:s,H:c},i._geo.H++,i.wrap||(i._geo.W+=2),y(b({},i),{W:s,H:c,rules:r})}(c);var u,l=this.options._geo,h=l.W,d=l.H,f=new I(h,d);Object.assign(this,{id:i,entities:{},indexes:{},geo:f,start_index:f.xy2index([Math.floor(h/2)-1,1]),_id:1,xs:ae(h),actions:[],generator:G.generator(this.options.rules.seed),ghost:null,mitt:{all:u=u||new Map,on:function(e,t){var n=u.get(e);n?n.push(t):u.set(e,[t])},off:function(e,t){var n=u.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):u.set(e,[]))},emit:function(e,t){var n=u.get(e);n&&n.slice().map((function(e){e(t)})),(n=u.get("*"))&&n.slice().map((function(n){n(e,t)}))}},piece_queue:[],renderer:new ee(this,a)}),this.cacheRotations(),this.makeWall(),this.makeAsh(),this.nextTurn(),this.campaign=K.get({key:null==(n=this.options.campaign)?void 0:n.key}),this.options.actions&&this.replayPreviousGame()}return Object(a["a"])(e,[{key:"replayPreviousGame",value:function(){var e,t=this;try{this.options.actions.forEach((function(n){var r=n.index,o=n.spin,s=n.swap;if(s)t.swap();else{if(o&&t.rotate(o),r-t.current_piece.index){var a=t.geo.index2xy(r),c=Object(i["a"])(a,2),u=c[0],l=c[1],h=t.geo.index2xy(t.current_piece.index),d=Object(i["a"])(h,2),f=d[0],p=d[1],g=l-p,m=u-f;m&&(t._moveCurrent(m),t.renderer.moveCurrent()),g&&(t._moveCurrent(g*t.geo.W),t.renderer.moveCurrent())}t.nextTurn(),e=C(t.indexes)}}))}catch(h){throw console.error("replay failed on step ".concat(this.actions.length,"/").concat(this.options.actions.length)),h}this.options.hash!==e&&console.warn("hash mis-match")}},{key:"turn",get:function(){return this.actions.length+1}},{key:"print",value:function(){console.log(this.geo.print(Object.fromEntries(Object.entries(this.indexes).map((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];return[ne,re].includes(r)?[n,r]:[n,le[r%le.length]]})))))}},{key:"makeWall",value:function(){var e=this.geo,t=e.H,n=e.W,r=ae(n).map((function(e){return e+(t-1)*n}));this.options.wrap||(ae(t-1).map((function(e){r.push(e*n),r.push(e*n+n-1)})),this.xs.shift(),this.xs.pop()),this._newPiece({shape:ne,id:ne,indexes:r})}},{key:"_checkAndSplit",value:function(e){var t=this,n={},r=[],i=function i(o){n[o]||t.indexes[o]!==e.id||(r.push(o),n[o]=!0,t.geo.dindexes.forEach((function(e){return i(e+o)})))};if(i(e.indexes[0]),r.length!==e.indexes.length){var o=e.indexes.filter((function(e){return!r.includes(e)}));e.block_ids=r.map((function(t){return e.block_ids[e.indexes.indexOf(t)]})),e.indexes=r,this._placePiece(e),o.forEach((function(e){return delete t.indexes[e]}));var s=this._newPiece({shape:e.shape,index:o[0],indexes:o});this._checkAndSplit(s)}}},{key:"splitAndMerge",value:function(e){var t=this;Object.keys(this._removed_pieces_by_id).map((function(e){return t.entities[e]})).filter((function(e){return e&&e.id!==re})).forEach((function(e){return t._checkAndSplit(e)})),this.options.rules.sticky&&Object.values(this.entities).forEach((function(e){t.entities[e.id]&&t.checkAndStick(e)}))}},{key:"checkAndCascade",value:function(){var e=this;this._fixed_pieces=Object(o["a"])({},ne,!0);for(var t=this.geo,n=t.W,r=t.H,i=ae(n).map((function(e){return e+n*(r-1)})),s={},a={},c=1e4;i.length&&c--;){var u=i.pop();a[u]=(a[u]||0)+1,s[this.indexes[u]]=!0;var l=u-n,h=this.indexes[l];s[h]||function(){var t=e.entities[h];null==t||t.indexes.forEach((function(n){i.push(n),e._fixed_pieces[t.id]=!0}))}()}if(c<1)throw"Unable to solve cascade";var d=Object.values(this.entities).filter((function(t){return!e._fixed_pieces[t.id]}));return d.forEach((function(t){return t.indexes.forEach((function(t){return delete e.indexes[t]}))})),d.forEach((function(t){t.indexes=t.indexes.map((function(e){return e+n})),e._placePiece(t)})),d.length&&this.checkAndCascade(),d}},{key:"checkAndStick",value:function(e){var t=this;if(![se,ie,oe,ne,re].includes(e.shape)){var n={};e.indexes.forEach((function(r){t.geo.dindexes.forEach((function(i){var o=r+i,s=t.indexes[o],a=t.entities[s];a&&a!==e&&a.shape===e.shape&&(n[s]=a)}))})),Object.values(n).forEach((function(n){e.indexes=e.indexes.concat(n.indexes);var i=Math.max.apply(Math,Object(r["a"])(e.indexes));e.block_ids=ae(e.indexes.length).map((function(e){return e+i})),n.indexes.forEach((function(e){return delete t.indexes[e]})),delete t.entities[n.id]})),Object.keys(n).length>0&&this._placePiece(e)}}},{key:"makeAsh",value:function(){var e=this,t=this.options.rules.b,n=void 0===t?{}:t;if(n.lines&&n.algorithm){var r=[];ae(n.lines).forEach((function(t){var n=e.geo.H-t-2;e.xs.forEach((function(t){return r.push(e.geo.xy2index([t,n]))}))}));for(var i=0,o={},s=J[n.algorithm](n.seed);i<r.length;)i+=s(),o[i]=!0;r=r.filter((function(e,t){return!o[t]})),this._newPiece({shape:re,id:re,indexes:r})}}},{key:"start",value:function(){}},{key:"serialize",value:function(){var e=this.actions,t=this.id,n=C(this.indexes);return y(b({},this.options),{actions:e,hash:n,id:t})}},{key:"swap",value:function(){var e=this;delete this._dropping;var t=this.current_piece,n=t.shape,r=t.indexes,i=t.id;r.forEach((function(t){return delete e.indexes[t]})),delete this.entities[i],this.addPiece(this.stash),this.stash=n,this.actions.push({swap:!0}),this.renderer.stash(this.current_piece,i)}},{key:"_lineWillClear",value:function(e){var t,n=this,r=this.geo.getRowIndexes(e).map((function(e){return n.indexes[e]})),i=Object(u["a"])(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(void 0===o)return!1}}catch(s){i.e(s)}finally{i.f()}return!0}},{key:"_checkAndStickyBomb",value:function(e){var t=this;if(this._sticky_bombs=[],this.options.rules.sticky_bomb&&this.current_piece){for(var n=this.current_piece.indexes.filter((function(n){return e.includes(t.geo.index2xy(n)[1])})).length?this.current_piece.indexes.slice():[],i=!1,o={},s=function(){var e=n.pop();o[e]||(o[e]=!0,t.geo.dindexes.forEach((function(r){var s=r+e;if(!o[s]){var a=t.entities[t.indexes[s]];a&&![ie,oe,se,ne].includes(a.shape)&&(t._sticky_bombs.push(s),a.shape===t.current_piece.shape&&(n.push(s),a.id!==t.current_piece.id&&(i=!0)))}})))};n.length;)s();this._sticky_bombs=Object(r["a"])(new Set(this._sticky_bombs)),i&&this._sticky_bombs.forEach((function(e){t._removeBlock(e),t._newPiece({shape:se,indexes:[e]})}))}}},{key:"updateBoard",value:function(e){var t=this,n=[];e.forEach((function(e){return e.indexes.forEach((function(e){return n.push(e)}))}));var o=ae(ue).map((function(e){return t._sealevel-1-e})).filter((function(e){return e>=t._min_y})),s=o.filter((function(e){return t._lineWillClear(e)}));this._removed_pieces_by_id={},this._checkAndNuke(s),this._checkAndStickyBomb(s),this._cleared_current=[],this._cleared_hot_cold={},s.sort((function(e,t){return e-t})),s.forEach((function(e){return t.removeLine(e)})),this.renderer.flashLines(s),this.splitAndMerge(Math.max.apply(Math,Object(r["a"])(o)));var a=[];Object.entries(this._cleared_hot_cold).forEach((function(e){var n=Object(i["a"])(e,2),r=n[0],o=n[1];if(r=Number(r),o.charges--,!(o.charges<1)){var c=t.geo.index2xy(r)[1];r+=s.filter((function(e){return c<e})).length*t.geo.W,o.shape===ie?t._placeHotPiece(o,Number(r)):t._placeColdPiece(o,Number(r)),a.push(o)}})),a.length&&this.renderer.moveNukes(a),(s.length&&this.options.rules.cascade||Object.keys(this._cleared_hot_cold).length>0||this._sticky_bombs.length>0)&&this.checkAndCascade()}},{key:"_validateIndex",value:function(e){if(e>=this.geo.AREA)throw"Cascade of hot/cold piece failed"}},{key:"_cascadeHotCold",value:function(e,t){for(this._validateIndex(t);t<this.geo.AREA&&!this.indexes[t+this.geo.W];)t+=this.geo.W;this._validateIndex(t),e.index=t,e.indexes=[t],this._placePiece(e)}},{key:"_placeColdPiece",value:function(e,t){for(;t<this.geo.AREA;){if(t+=this.geo.W,this.indexes[t]===ne)return;var n=this.entities[this.indexes[t]];if(!n)break;n.shape}this._cascadeHotCold(e,t)}},{key:"_placeHotPiece",value:function(e,t){for(;t<this.geo.AREA;){t+=this.geo.W;var n=this.entities[this.indexes[t]];if(!n)break;if(n.shape!==oe){if(n.shape===ie){this._removeBlock(t),this._placeHotPiece(n,t);break}if(n.shape===ne)return;this._removeBlock(t);break}}this._cascadeHotCold(e,t)}},{key:"_isNuclear",value:function(e,t){var n=this,r=this.geo.index2xy,i={fusion:function(e){return n._lineWillClear(r(e)[1])},fission:function(e){return!n._lineWillClear(r(e)[1])}},o=t.filter(i[e]);return o.length===t.length&&"fission"===e?[]:o}},{key:"_checkAndNuke",value:function(e){var t,n=this,r=(null==(t=this.options.rules)?void 0:t.nuclear)||{},i=r.type,o=r.temperature;if(i){var s=this._isNuclear(i,this.current_piece.indexes),a="hot"===o?ie:oe,c=Math.floor(6/s.length);"fusion"===i&&c++;var u=s.map((function(e){return n._removeBlock(e),n._newPiece({shape:a,indexes:[e],charges:c})}));e.forEach((function(e){return n.geo.getRowIndexes(e).forEach((function(e){var t=n.entities[n.indexes[e]];[ie,oe].includes(t.shape)&&t.charges&&u.push(t)}))})),u.length&&this.renderer.addNukes(u)}}},{key:"nextTurn",value:function(){var e=this.current_piece;if(e){var t=e.index,n=e.spin;this.updateBoard([e]),this.actions.push({index:t,spin:n})}delete this._dropping;var i=Object.values(this.entities).filter((function(e){return e.id!==ne})).map((function(e){return e._min_y}));this._min_y=Math.min.apply(Math,[this.geo.H].concat(Object(r["a"])(i))),this._skyline=Math.max(ce,this._min_y),this._skyline=Math.min(this._skyline,this.geo.H-ue-1);var o=Math.max(1,this._skyline-5);this.start_index=this.geo.xy2index([Math.floor(this.geo.W/2)-1,o]),this._sealevel=this._skyline+ue,this._min_y<=4?(this.gameover=!0,this.mitt.emit("gameover")):this.addPiece(),this.mitt.emit("save"),this.renderer.draw()}},{key:"addPiece",value:function(e){var t=this;if(!e){for(;this.piece_queue.length<9;)this.piece_queue.push(this.generator());e=this.piece_queue.shift(),this.renderer.markStale("queue")}var n=G[e].dxys,r=n.map(this.geo.dxy2dindex).map((function(e){return e+t.start_index}));this.current_piece=this._newPiece({shape:e,spin:0,index:this.start_index,indexes:r})}},{key:"_newPiece",value:function(e){var t=v(e,[]);return t.id||(t.id=this._id++),t.block_ids=t.indexes.map((function(e){return"".concat(t.id,"-").concat(e)})),this.entities[t.id]=t,this._placePiece(t),t}},{key:"cacheRotations",value:function(){var e=this;this._rotation_cache={},G.all.forEach((function(t){var n=t.shape,r=t.dxys,o=t.max_spin;e._rotation_cache[n]={},ae(4).forEach((function(t){var s=t%o,a=r.map((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];return 0===s?[n,r]:1===s?[-r,n]:2===s?[-n,-r]:[r,-n]}));e._rotation_cache[n][t]=a.map(e.geo.dxy2dindex)}))}))}},{key:"canMoveCurrent",value:function(e){var t=this;return void 0===this.current_piece.indexes.map((function(n){return t.indexes[n+e]})).find((function(e){return e&&e!==t.current_piece.id}))}},{key:"_placePiece",value:function(e){var t,n=this;if(void 0!==e.indexes.find((function(t){var r=n.indexes[t];return r&&r!==e.id}))){var i=e.indexes.map((function(e){return[e,n.indexes[e]]}));throw this.print(),console.warn(e),console.warn("targets",i),"Unable to place piece due to collision"}null==(t=e._old_indexes)||t.filter((function(t){return n.indexes[t]===e.id})).forEach((function(e){return delete n.indexes[e]})),e.indexes.forEach((function(t){return n.indexes[t]=e.id})),this.renderer.markStale(e.id),e._min_y=Math.floor(Math.min.apply(Math,Object(r["a"])(e.indexes))/this.geo.W),this.entities[e.id]=e,e._old_indexes=e.indexes.slice()}},{key:"_removeBlock",value:function(e){var t=this.entities[this.indexes[e]],n=t.indexes.indexOf(e);t.indexes.splice(n,1),t.block_ids.splice(n,1),delete this.indexes[e],t.indexes.length?this._removed_pieces_by_id[t.id]=t:delete this.entities[t.id]}},{key:"removeLine",value:function(e){var t=this,n=this.geo,o=n.W,s=n.xy2index,a=s([0,e]);this.xs.forEach((function(n){var r=s([n,e]),i=t.indexes[r];i===t.current_piece.id&&t._cleared_current.push(r);var o=t.entities[i];[ie,oe].includes(null==o?void 0:o.shape)&&(t._cleared_hot_cold[r]=o),t._removeBlock(r),t.renderer.markStale(i)}));var c=Object.entries(this.indexes).map((function(e){var t=Object(i["a"])(e,2),n=t[0],r=t[1];return n=Number(n),r!==ne&&n<a&&(n+=o),[n,r]}));this.indexes=Object.fromEntries(c),Object.values(this.entities).forEach((function(e){e.id!==ne&&(t.renderer.markStale(e.id),e.indexes=e.indexes.map((function(e){return e<a?e+o:e})),e._min_y=Math.floor(Math.min.apply(Math,Object(r["a"])(e.indexes))/t.geo.W))}))}},{key:"tick",value:function(){var e=this;cancelAnimationFrame(this._frame),this._frame=requestAnimationFrame((function(){return e.tick()}))}},{key:"pause",value:function(){cancelAnimationFrame(this._frame),this._paused_at=(new Date).valueOf()}},{key:"resume",value:function(){var e=this;cancelAnimationFrame(this._frame),this._last_move_at=(new Date).valueOf()-(this.paused_at-this.last_move_at),delete this._paused_at,this._frame=requestAnimationFrame((function(){return e.tick()}))}}]),e}();he.prepOptions=function(e){e=T(e);var t=e,n=t.rules;return n.seed=(n.seed||(new Date).valueOf()%256).toString(),n.b&&(n.b.seed=(n.b.seed||(new Date).valueOf()%256).toString()),e};var de=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s["a"])(this,e),this.options=n,this.reset(),this.paused=!1,this.pause=function(){t.paused=!0,t.board.pause()}}return Object(a["a"])(e,[{key:"reset",value:function(){this.board=new he(this.options),this.board.start()}},{key:"input",value:function(e){clearTimeout(this.timeout),this.board[e]()}},{key:"on",value:function(e,t){this.board.mitt.on(e,t)}},{key:"resume",value:function(){this.paused=!1,this.board.resume()}}]),e}()}).call(this,n("c8ba"))},d4aa:function(e,t,n){"use strict";n("3b37")}});
//# sourceMappingURL=app.46546b57.js.map