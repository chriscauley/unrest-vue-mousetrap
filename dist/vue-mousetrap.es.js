import e from"mousetrap";import{openBlock as t,createBlock as s,createVNode as o,renderSlot as n,Fragment as i,renderList as l,toDisplayString as r,createCommentVNode as a,createTextVNode as c,computed as p,watch as u,onMounted as d,onUnmounted as y}from"vue";const m={},g={},f=e=>e.replace(/[A-Z]/g,(e=>` ${e.toLowerCase()}`)).replace(/-_/g," ").replace(/^./,(e=>e.toUpperCase())),h=e=>e=(e=e.split(",")[0]).replace("mod","undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"cmd":"ctrl"),k=(...e)=>{if(1===e.length)return void k("",e[0]);const[t,s]=e;g[t]||(g[t]={slug:t,name:f(t),actions:[]});const o=g[t];Object.entries(s).forEach((([e,t])=>{"string"==typeof t&&(t={keys:t}),t.name=t.name||f(e),t.display=t.display||h(t.keys),t.short_display=t.short_display||t.display.replace(/shift ?\+ ?/gi,"⇧").replace(/meta ?\+ ?/gi,"⌘").replace(/control ?\+ ?/gi,"^"),m[e]=t,o.actions.push(t)}))};Object.assign(k,{actionBySlug:m,groupBySlug:g}),function(e){if(e){var t={},s=e.prototype.stopCallback;e.prototype.stopCallback=function(e,o,n,i){return!!this.paused||!t[n]&&!t[i]&&s.call(this,e,o,n)},e.prototype.bindGlobal=function(e,s,o){if(this.bind(e,s,o),e instanceof Array)for(var n=0;n<e.length;n++)t[e[n]]=!0;else t[e]=!0},e.init()}}(void 0!==e?e:void 0);var b=(t,{element:s,delimiter:o=","}={})=>{const n=new e(s);return Object.entries(t).forEach((([e,t])=>{k.actionBySlug[e]&&(e=k.actionBySlug[e].keys),e.includes(o)&&(e=e.split(o).map((e=>e.trim()))),"function"==typeof t&&(t={keydown:t}),t.repeat&&!t.keydown&&(t.keydown=t.repeat);const{repeat:s,keydown:i,keyup:l,keypress:r,global:a}=t,c=(...e)=>a?n.bindGlobal(...e):n.bind(...e);s?c(e,(e=>e.repeat?s(e):i(e))):i&&c(e,(e=>!e.repeat&&i(e))),l&&c(e,l,"keyup"),r&&c(e,r,"keypress")})),n};const v=({namespace:e="mousetrap",delimiter:t=","})=>({watch:{[e]:"_sync"+e},mounted(){this["_sync"+e]()},beforeUnmount(){this[`__${e}`].reset()},methods:{["_sync"+e](){var s;null==(s=this[`__${e}`])||s.reset(),this[`__${e}`]=b(this[e],{element:this.$el,delimiter:t})}}}),_=v({});_.config=v;const w={mixins:[_],props:{group_slugs:Array},emits:["close"],computed:{groups(){const{group_slugs:e=Object.keys(k.groupBySlug)}=this;return e.map((e=>k.groupBySlug[e]))},mousetrap(){return{"esc,?":()=>this.$emit("close")}}}},$={class:"modal"},S={class:"modal-content"},B=o("h3",null,"Keyboard Shortcuts",-1),C={key:0},j={class:"table"};w.render=function(e,p,u,d,y,m){return t(),s("div",$,[o("div",{class:"modal-mask",onClick:p[1]||(p[1]=t=>e.$emit("close"))}),o("div",S,[B,n(e.$slots,"default"),(t(!0),s(i,null,l(m.groups,(e=>(t(),s("div",{key:e.slug},[e.name?(t(),s("h4",C,r(e.name),1)):a("",!0),o("table",j,[o("tbody",null,[(t(!0),s(i,null,l(e.actions,(e=>(t(),s("tr",{key:e.slug},[o("td",null,[c(r(e.name)+" ",1),e.description?(t(),s("span",{key:0,title:e.description}," ❓ ",8,["title"])):a("",!0)]),o("td",null,r(e.display),1)])))),128))])])])))),128))])])};var O={Mixin:_,Modal:w,register:k,use:(e,t)=>{let s;if("function"==typeof e){const o=p(e);u(o,(e=>{s.reset(),s=b(e,t)})),e=o.value}d((()=>{s=b(e,t)})),y((()=>{s.reset()}))}};export default O;
