import e from"mousetrap";import{openBlock as t,createBlock as s,createVNode as l,renderSlot as o,Fragment as a,renderList as i,toDisplayString as n,createCommentVNode as r,createTextVNode as c,computed as p,watch as u,onMounted as d,onUnmounted as y}from"vue";const g={},m={},h=e=>e.replace(/[A-Z]/g,(e=>` ${e.toLowerCase()}`)).replace(/-_/g," ").replace(/^./,(e=>e.toUpperCase())),b=e=>e=(e=e.split(",")[0]).replace("mod","undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"cmd":"ctrl"),f=(...e)=>{if(1===e.length)return void f("",e[0]);const[t,s]=e;m[t]||(m[t]={slug:t,name:h(t),actions:[]});const l=m[t];Object.entries(s).forEach((([e,t])=>{"string"==typeof t&&(t={keys:t}),t.name=t.name||h(e),t.display=t.display||b(t.keys),t.short_display=t.short_display||t.display.replace(/shift ?\+ ?/gi,"⇧").replace(/meta ?\+ ?/gi,"⌘").replace(/control ?\+ ?/gi,"^"),g[e]=t,l.actions.push(t)}))};Object.assign(f,{actionBySlug:g,groupBySlug:m});const k=e.prototype.stopCallback;e.prototype.stopCallback=function(e,t,s,l){if(this.paused)return!0;const o=this._globalCallbacks||{};return!o[s]&&!o[l]&&k.call(this,e,t,s)},e.prototype.bindGlobal=function(e,t,s){if(this.bind(e,t,s),this._globalCallbacks=this._globalCallbacks||{},e instanceof Array)for(var l=0;l<e.length;l++)this._globalCallbacks[e[l]]=!0;else this._globalCallbacks[e]=!0};var _=(t,{delimiter:s=","}={})=>{const l=new e;return Object.entries(t).forEach((([e,t])=>{f.actionBySlug[e]&&(e=f.actionBySlug[e].keys),e.includes(s)&&(e=e.split(s).map((e=>e.trim()))),"function"==typeof t&&(t={keydown:t}),t.repeat&&!t.keydown&&(t.keydown=t.repeat);const{repeat:o,keydown:a,keyup:i,keypress:n,global:r}=t,c=(...e)=>r?l.bindGlobal(...e):l.bind(...e);o?c(e,(e=>e.repeat?o(e):a(e))):a&&c(e,(e=>!e.repeat&&a(e))),i&&c(e,i,"keyup"),n&&c(e,n,"keypress")})),l};const v=({namespace:e="mousetrap",delimiter:t=","})=>({watch:{[e]:"_sync"+e},mounted(){this["_sync"+e]()},beforeUnmount(){this[`__${e}`].reset()},methods:{["_sync"+e](){var s;null==(s=this[`__${e}`])||s.reset(),this[`__${e}`]=_(this[e],{delimiter:t})}}}),w=v({});w.config=v;const C={mixins:[w],props:{group_slugs:Array},emits:["close"],computed:{groups(){const{group_slugs:e=Object.keys(f.groupBySlug)}=this;return e.map((e=>f.groupBySlug[e]))},mousetrap(){return{"esc,?":()=>this.$emit("close")}}}},S={class:"modal"},$={class:"modal-content"},B=l("h3",null,"Keyboard Shortcuts",-1),j={key:0},O={class:"table"};C.render=function(e,p,u,d,y,g){return t(),s("div",S,[l("div",{class:"modal-mask",onClick:p[1]||(p[1]=t=>e.$emit("close"))}),l("div",$,[B,o(e.$slots,"default"),(t(!0),s(a,null,i(g.groups,(e=>(t(),s("div",{key:e.slug},[e.name?(t(),s("h4",j,n(e.name),1)):r("",!0),l("table",O,[l("tbody",null,[(t(!0),s(a,null,i(e.actions,(e=>(t(),s("tr",{key:e.slug},[l("td",null,[c(n(e.name)+" ",1),e.description?(t(),s("span",{key:0,title:e.description}," ❓ ",8,["title"])):r("",!0)]),l("td",null,n(e.display),1)])))),128))])])])))),128))])])};var x={Mixin:w,Modal:C,register:f,use:(e,t)=>{let s;if("function"==typeof e){const l=p(e);u(l,(e=>{s.reset(),s=_(e,t)})),e=l.value}d((()=>{s=_(e,t)})),y((()=>{s.reset()}))}};export default x;
